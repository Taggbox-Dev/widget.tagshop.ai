(self.webpackChunkembed_widget=self.webpackChunkembed_widget||[]).push([[4971],{24971:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>h});var a=i(9950),n=i(38092),o=i.n(n),r=i(80415),s=i(76506),l=i(95491),d=i.n(l),u=i(44414);class c extends a.Component{constructor(t){super(t),this.handlePlay=()=>{this.setState({isPlaying:!0})},this.onMediaLoad=async t=>{if(t.mediaHeight&&t.mediaWidth)this.setState({mediaSize:{height:t.mediaHeight,width:t.mediaWidth}});else try{const{width:e,height:i}=await(0,s.TW)(t.postFile);this.setState({mediaSize:{height:i,width:e}})}catch(e){this.setState({mediaSize:{height:100,width:100}})}},this.state={imageError:!1,windowWidth:window.innerWidth,windowHeight:window.innerHeight,mediaSize:{height:400,width:400},animate:!1,itemData:null,isPlaying:!1}}componentDidMount(){this.onLoadAnimation()}componentDidUpdate(t){d().isEqual(t.itemData,this.props.itemData)||(this.setState({itemData:this.props.itemData,animate:!1}),this.onLoadAnimation())}onLoadAnimation(){setTimeout((()=>{this.setState({animate:!0}),this.onMediaLoad(this.props.itemData)}),1e3)}render(){const{itemData:t,wall:e}=this.props,{imageError:i,windowHeight:a,windowWidth:n,mediaSize:s,animate:l,isPlaying:d}=this.state,c=n>a?((a-400)/50).toFixed():((a/2-200)/50).toFixed(),h=1!==t.type,m=3===t.type||5===t.type;let p=`${t.postFile}`;!(!i&&""!=t.mediaFile)||1==t.type&&t.type;const f=Math.min(n/s.width,a/s.height),g=s.height*f,v=s.width*f,w={paddingBottom:100*g/v+"%"};return t.mediaFile.includes(r.vr)&&(p=t.postFile),(0,u.jsxs)("div",{id:"spotlight__",className:"sl_container",children:[(0,u.jsx)("div",{className:"sl_overlay_ "+(l?"sl_media_ani":""),style:{backgroundImage:`url(${p})`}}),(0,u.jsx)("div",{className:"sl_wrap",children:(0,u.jsx)("div",{className:"sl_wrap_row sl_only_text",children:h?(0,u.jsx)("div",{className:"sl_media_wrap "+(l?"sl_media_ani":""),style:{maxWidth:v},children:m?(0,u.jsxs)("div",{className:"sl_media_wrap_",style:w,children:[!d&&(0,u.jsx)("img",{src:t.postFile,alt:"Video Poster",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover",cursor:"pointer",zIndex:1},onLoad:this.handlePlay}),(0,u.jsx)(o(),{url:(b=t.mediaUrl,y=t.networkId,25===y?String(b).replace("https://w.soundcloud.com/player/?url=",""):b),config:{facebook:{appId:"117029975354072",attributes:{"data-width":"auto",muted:!0,poster:t.postFile}},file:{forceVideo:!0,attributes:{muted:!0,poster:t.postFile}}},className:"sl_media_",loop:!0,autoPlay:!0,muted:!0,volume:1,playsinline:!0,playing:!0,height:"100%",width:"100%",controls:!1})]}):(0,u.jsx)("div",{className:"sl_media_wrap_",style:w,children:(0,u.jsx)("img",{className:"sl_media_",src:t.postFile,height:g,width:v})})}):null})})]});var b,y}}const h=(0,a.memo)(c)},76506:(t,e,i)=>{"use strict";i.d(e,{C9:()=>g,Cq:()=>f,HI:()=>m,Ph:()=>j,S2:()=>x,TW:()=>N,Uy:()=>u,fF:()=>v,hZ:()=>b,hz:()=>p,iS:()=>h,p5:()=>T,pj:()=>I,sl:()=>_,um:()=>c,vG:()=>$,w:()=>w,wG:()=>y});var a=i(66345),n=i(80415),o=i(296),r=i(86961);let s=[],l=!1;const d=new Headers({"Content-Type":"application/json",Authorization:`Bearer ${a.$x}`,Productdomain:a.QR}),u=t=>{var e;return null===(e=document.getElementById("tb_onsite_btn_id"))||void 0===e?void 0:e.classList.toggle("tb_onsite_btn_disabled",1===t)},c=t=>{var e,i;return null===(e=(i={1:()=>window.onShowDemoPost(1),2:()=>window.hendleFeeds("addFeeds"),3:()=>window.hendleFeeds("manageFeeds")})[t])||void 0===e?void 0:e.call(i)},h=t=>{const e=new Date(1e3*t);return`${["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()]} ${e.getDate()}, ${e.getFullYear()}`},m=t=>{try{s.push(t)}catch(e){console.log(e)}},p=t=>t&&""!==t&&!t.includes("ui-avatars"),f=t=>{if(!t)return"0 Byte";const e=Math.floor(Math.log(t)/Math.log(1024));return{size:Math.round(t/Math.pow(1024,e),2),sizeText:["Bytes","KB","MB","GB","TB"][e]}},g=t=>t.startsWith("http://")||t.startsWith("https://")?t:"https://"+t,v=t=>{const e=Date.now()-1e3*t;if(e<6e4)return"just now";const i=[{label:"year",ms:31536e6},{label:"month",ms:2592e6},{label:"week",ms:6048e5},{label:"day",ms:864e5},{label:"hour",ms:36e5},{label:"minute",ms:6e4}].find((t=>{let{ms:i}=t;return e>=i})),a=Math.floor(e/i.ms);return`${a} ${i.label}${a>1?"s":""} ago`},w=t=>{try{return null!==t&&void 0!==t&&t.includes("http")?[...new Set(t.match(/(((ftp|https?):\/\/)[\w@:%_\+.~#?&//=]+)/g))].reduce(((t,e)=>t.replaceAll(e,`<a class="text_links_" role="link" target="_blank" href="${e}">${e}</a>`)),t):t}catch{return t}},b=()=>[`${n.om}`,"Website Widget"],y=t=>t&&String(t)?unescape(t).split("/").pop().split("/").slice(-1).join().split(".").shift():"",x=["localhost","widget","wall_id="].every((t=>(0,a.vq)(t)))?"taggbox_main":a.MH||[`${a.Xg}.${a.IF}`,`${a.Xg}${a.t6}${a.IF}`,`${a.Xg}s.${a.IF}`].some((t=>(0,a.vq)(t)))?"tag_main__root":a.HY?"taggShopRoot":"taggbox_main",_=t=>{const e=Math.floor(Math.log10(t)/3)||0;return e?+(t/Math.pow(1e3,e)).toFixed(0)+["","K","M","B","T"][e]:t},j=t=>a.MH?t:atob(t),S=t=>{if(null===(i=t)||void 0===i?void 0:i.startsWith("#")){const e=parseInt(t.slice(1),16);return{r:e>>16&255,g:e>>8&255,b:255&e}}{var e;const i=(null===t||void 0===t||null===(e=t.match(/\d+/g))||void 0===e?void 0:e.map(Number))||[0,0,0];return{r:i[0],g:i[1],b:i[2]}}var i},F=t=>{const{r:e,g:i,b:a}=S(t);return Math.sqrt((255-e)**2+(255-i)**2+(255-a)**2)<=30},M=t=>{const{r:e,g:i,b:a}=S(t);return Math.sqrt((e-50)**2+(i-50)**2+(a-50)**2)<50},$=(t,e)=>{var i;null!==(i=t)&&void 0!==i&&i.startsWith("rgba")&&(t="#000000");const a=(t,e)=>e.some((e=>null===t||void 0===t?void 0:t.includes(e))),n=t=>a(t,["ffffff","255, 255, 255","#fff"]),o=t=>a(t,["000000","0, 0, 0","#000"]),[r,s]=[F(t),M(t)],[l,d]=[F(e),M(e)];return r&&l||n(t)&&n(e)?"#000000":s&&d||o(t)&&o(e)?"#ffffff":t},T=(t,e,i)=>t&&t.length>0?t.findIndex((t=>t.id===e)):i,I=()=>{try{const{wall:t}=o.A.getState().appData,{webId:e,wallId:i,ownerId:n}=t.ThemeInfo;l||(window.addEventListener("beforeunload",(()=>{if(0===s.length)return;const t=s.reduce(((t,e)=>t+e),0);t>0?fetch(a.KQ,{method:"POST",headers:d,body:JSON.stringify({action:1,model:null!==r.Ex&&void 0!==r.Ex&&r.Ex.includes("website")?"website":"wall",playCount:s.length,wall:a.HY?e:i,playTime:t,owner:n}),keepalive:!0}).finally((()=>(s=[],l=!1))):(s=[],l=!1)})),l=!0)}catch(t){console.error(t)}},N=t=>new Promise(((e,i)=>Object.assign(new Image,{onload:function(){e({width:this.naturalWidth,height:this.naturalHeight})},onerror:t=>i(new Error(`Image loading error: ${t.message}`)),src:t})))},4635:(t,e,i)=>{var a=i(14759).Symbol;t.exports=a},22022:(t,e,i)=>{var a=i(4635),n=i(81581),o=i(65336),r=a?a.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":r&&r in Object(t)?n(t):o(t)}},86914:(t,e,i)=>{var a=i(88798),n=/^\s+/;t.exports=function(t){return t?t.slice(0,a(t)+1).replace(n,""):t}},16658:(t,e,i)=>{var a="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g;t.exports=a},81581:(t,e,i)=>{var a=i(4635),n=Object.prototype,o=n.hasOwnProperty,r=n.toString,s=a?a.toStringTag:void 0;t.exports=function(t){var e=o.call(t,s),i=t[s];try{t[s]=void 0;var a=!0}catch(l){}var n=r.call(t);return a&&(e?t[s]=i:delete t[s]),n}},65336:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},14759:(t,e,i)=>{var a=i(16658),n="object"==typeof self&&self&&self.Object===Object&&self,o=a||n||Function("return this")();t.exports=o},88798:t=>{var e=/\s/;t.exports=function(t){for(var i=t.length;i--&&e.test(t.charAt(i)););return i}},95491:(t,e,i)=>{var a=i(24567),n=i(34378),o=i(72588),r=Math.max,s=Math.min;t.exports=function(t,e,i){var l,d,u,c,h,m,p=0,f=!1,g=!1,v=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function w(e){var i=l,a=d;return l=d=void 0,p=e,c=t.apply(a,i)}function b(t){var i=t-m;return void 0===m||i>=e||i<0||g&&t-p>=u}function y(){var t=n();if(b(t))return x(t);h=setTimeout(y,function(t){var i=e-(t-m);return g?s(i,u-(t-p)):i}(t))}function x(t){return h=void 0,v&&l?w(t):(l=d=void 0,c)}function _(){var t=n(),i=b(t);if(l=arguments,d=this,m=t,i){if(void 0===h)return function(t){return p=t,h=setTimeout(y,e),f?w(t):c}(m);if(g)return clearTimeout(h),h=setTimeout(y,e),w(m)}return void 0===h&&(h=setTimeout(y,e)),c}return e=o(e)||0,a(i)&&(f=!!i.leading,u=(g="maxWait"in i)?r(o(i.maxWait)||0,e):u,v="trailing"in i?!!i.trailing:v),_.cancel=function(){void 0!==h&&clearTimeout(h),p=0,l=m=d=h=void 0},_.flush=function(){return void 0===h?c:x(n())},_}},24567:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},39248:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},50184:(t,e,i)=>{var a=i(22022),n=i(39248);t.exports=function(t){return"symbol"==typeof t||n(t)&&"[object Symbol]"==a(t)}},34378:(t,e,i)=>{var a=i(14759);t.exports=function(){return a.Date.now()}},72588:(t,e,i)=>{var a=i(86914),n=i(24567),o=i(50184),r=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,d=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(o(t))return NaN;if(n(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=n(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=a(t);var i=s.test(t);return i||l.test(t)?d(t.slice(2),i?2:8):r.test(t)?NaN:+t}}}]);
"use strict";(self.webpackChunkembed_widget=self.webpackChunkembed_widget||[]).push([[8534],{18534:(e,t,a)=>{a.r(t),a.d(t,{default:()=>_});var n=a(47313),o=a(65537),s=a(98501),i=a(17739),l=a(35179),r=a(46335),d=a(3671),h=a(61893),c=a(46417);const p=n.lazy((()=>a.e(1030).then(a.bind(a,11030)))),u=n.lazy((()=>a.e(3779).then(a.bind(a,3779)))),m=n.lazy((()=>Promise.all([a.e(6119),a.e(510),a.e(3346),a.e(1395),a.e(6977)]).then(a.bind(a,16977)))),g=n.lazy((()=>Promise.all([a.e(6119),a.e(510),a.e(1395),a.e(9146)]).then(a.bind(a,29146)))),w=n.lazy((()=>Promise.all([a.e(6119),a.e(510),a.e(3346),a.e(5042)]).then(a.bind(a,5042)))),b=n.lazy((()=>Promise.all([a.e(6119),a.e(510),a.e(3346),a.e(5136)]).then(a.bind(a,95136)))),f=n.lazy((()=>Promise.all([a.e(6119),a.e(3346),a.e(1395),a.e(1685)]).then(a.bind(a,12465)))),S=n.lazy((()=>Promise.all([a.e(1774),a.e(2090)]).then(a.bind(a,42090)))),v=n.lazy((()=>Promise.all([a.e(6119),a.e(510),a.e(1842)]).then(a.bind(a,1842)))),x=n.lazy((()=>Promise.all([a.e(6119),a.e(510),a.e(2970),a.e(3043),a.e(3893)]).then(a.bind(a,99154)))),T=n.lazy((()=>Promise.all([a.e(6119),a.e(510),a.e(2970),a.e(3043),a.e(1764)]).then(a.bind(a,81750)))),I=n.lazy((()=>Promise.all([a.e(6119),a.e(510),a.e(1774),a.e(6254)]).then(a.bind(a,76254)))),P=n.lazy((()=>Promise.all([a.e(6119),a.e(510),a.e(3346),a.e(1774),a.e(9105)]).then(a.bind(a,9105)))),y=n.lazy((()=>Promise.all([a.e(6119),a.e(510),a.e(3346),a.e(1774),a.e(4594)]).then(a.bind(a,20837)))),j=n.lazy((()=>Promise.all([a.e(6119),a.e(3346),a.e(4850)]).then(a.bind(a,14850)))),k=n.lazy((()=>Promise.all([a.e(6119),a.e(3346),a.e(2970),a.e(1395),a.e(8121)]).then(a.bind(a,30874)))),D=l.ig?s.K$:s.oH,M=l.ig?s.EM:s.rV,F=n.memo((e=>{let{loadBranding:t,renderId:a,handlePressStart:o,handlePressEnd:s,loadMoredata:i,wall:r,tuchMobile:d,reviewFilters:h,webFilters:p,postData:u,adjustWidth:D,clickToShowPopUp:M,cardNumber:F,onClickToCTA:U,postSizeInPx:_,onClickPopUpSlider:z,parentID:C,keyRender:B,containerSize:E,heightUpdate:L}=e;const W=!u.hasMoreData[0]||0!=u.hasMoreData[0].hasMoreData&&(!u.hasMoreData[u.appendData.networkID]||u.hasMoreData[u.appendData.networkID].hasMoreData),{CardStyle:N,ThemeStyle:A,ProductSetting:R,ThemeInfo:H,SnapUp:O}=r,q={...u,loadBranding:t,handlePressStart:o,handlePressEnd:s,heightUpdate:L,loadMoredata:i,reviewFilters:h,webFilters:p,hasMoreData:W,adjustWidth:D,clickToShowPopUp:M,onClickToCTA:U,onClickPopUpSlider:z,keyRender:B,containerSize:E,heightUpdate:L,cardNumber:F,postSizeInPx:_,parentID:C,renderId:a,CardStyle:N,ThemeStyle:A,ProductSetting:R,ThemeInfo:H,SnapUp:O};switch(H.id){case 3:return(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(g,{...q})});case 4:return(0,c.jsxs)(n.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:[(0,c.jsx)(w,{...q})," "]});case 19:case 59:case 83:return D?(0,c.jsxs)(n.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:[(0,c.jsx)(m,{...q})," "]}):null;case 50:return l.ig?(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(S,{...q})}):(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(f,{...q})});case 16:return(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(P,{...q})});case 55:case 81:return(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(I,{...q})});case 49:case 53:case 85:return(0,c.jsxs)(n.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:[" ",l.ig?(0,c.jsx)(v,{...q}):(0,c.jsx)(b,{...q})]});case 47:return(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(y,{tuchMobile:d,...q})});case 6:case 61:return(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(x,{...q})});case 62:return l.ig?(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(T,{...q})}):l.bX?(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)(c.Fragment,{})}):"";case 63:return(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(k,{...q})});case 64:return(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(j,{...q})});default:return(0,c.jsx)(c.Fragment,{})}}));class U extends n.PureComponent{constructor(){super(...arguments),this.state={adjustWidth:0,cardNumber:0,postSizeInPx:0,isLoaded:!1,currentIndex:-1,height:0,tuchMobile:!1,startPos:{x:0,y:0},isBranding:!1},this.loadBranding=()=>this.setState({isBranding:!0}),this.handleTouchStart=e=>this.setState({tuchMobile:!0}),this.heightUpdate=()=>{if(!l.aL){const e=e=>(document.querySelector(e)||{}).clientHeight||0,t=e(".tb_wall_header__"),a=window.editor?e("#kt_header"):0,n=e(".ti_container");this.setState({height:t+a+n})}},this.autoLoadEditorScrollData=e=>{const{wall:t,postData:a,loaderData:n}=this.props,o=t.ThemeStyle.totalPosts;let s=document.getElementsByClassName("wall-editor");if(1==t.ThemeStyle.autoScrollStatus&&D.includes(null===t||void 0===t?void 0:t.ThemeInfo.id)&&s.length>0){let e=s[0];if(document.body.scrollHeight+e.scrollTop>=e.scrollHeight-10&&(!n||!n.isShowMoreLoading)){const e=Math.floor(Date.now()/1e3);this.props.nextData(l.ig?t.ThemeInfo.webId:t.ThemeInfo.wallId,e,o,a.appendData.networkID,a.appendData.after,a.appendData.heightEvent)}}},this.autoLoadScrollData=e=>{const{wall:t,postData:a,loaderData:n}=this.props,o=t.ThemeStyle.totalPosts,s=document.body,i=document.documentElement;if(1===t.ThemeStyle.autoScrollStatus&&D.includes(null===t||void 0===t?void 0:t.ThemeInfo.id)){const e=Math.max(s.scrollHeight,s.offsetHeight,i.clientHeight,i.scrollHeight,i.offsetHeight);if(window.innerHeight+window.pageYOffset>=parseInt(e)-parseInt(50)&&(!n||!n.isShowMoreLoading)){const e=Math.floor(Date.now()/1e3);this.props.nextData(l.ig?t.ThemeInfo.webId:t.ThemeInfo.wallId,e,o,a.appendData.networkID,a.appendData.after,a.appendData.heightEvent)}}},this.onResponsiveTheme=e=>{const{wall:t,containerSize:a}=this.props;let n=2===e?a.width+165:a.width,{adjustWidth:o,cardNumber:s}=(0,i.E)(n,t);this.setState({adjustWidth:o,cardNumber:s,postSizeInPx:(0,i.E)(n,t)},(()=>this.heightUpdate()))},this.onClickToShowPopup=(e,t)=>a=>{a.stopPropagation(),this.onLoadPopUp(e,t)},this.onClickPopUpSlider=(e,t)=>this.onLoadPopUp(e,t),this.onLoadPopUp=(e,t)=>{var a,n,o,s,d;const{wall:c,postData:p}=this.props,{viewOn:u,share:m}=c.ThemeStyle.language.text,g="tagembed"==(null===c||void 0===c||null===(a=c.User)||void 0===a?void 0:a.userDatabaseType),w=null===(n=c.ThemeInfo)||void 0===n?void 0:n.ownerId,b=l.ig?null===(o=c.ThemeInfo)||void 0===o?void 0:o.webId:null===(s=c.ThemeInfo)||void 0===s?void 0:s.wallId,f=null===(d=c.ThemeStyle)||void 0===d?void 0:d.modal;if(g||l.ig||!((0,i.b)()&&(null===f||void 0===f||!f.mobile)||g&&null!==f&&void 0!==f&&f.mobile&&""!==t.link)){let a=p.postData.map((e=>p.completeDataObject[e])).filter((e=>!String(e.id).includes("free_add_"))),n=(0,r.E6)(a,t.id,e);if(2===(null===f||void 0===f?void 0:f.action)){if("undefined"==t.link||""==t.link)return!1;window.open(t.link,"_blank")}else 3===(null===f||void 0===f?void 0:f.action)?window.open(f.redirect,"_blank"):1===(null===f||void 0===f?void 0:f.action)&&this.props.showPopUP({type:"post",card:t,idArray:a,index:n,viewOnText:u,shareText:m,imgData:i.CC,wall:c})}else{if("undefined"==t.link)return!1;window.open(t.link,"_blank")}const S={feed:t.feedId,post:t.referenceId?t.referenceId:t.id},v={action:2,wall:b,feed:t.feedId,post:t.referenceId?t.referenceId:t.id,type:3,owner:w};(0,h.S5)(l.nX?v:{action:2,wall:b,...S,owner:w}),(0,h.WI)("Tagbox","popupclick_","popup",t.link)},this.loadPopUpWithTimer=()=>{const{currentIndex:e}=this.state,{postData:{postData:t,completeDataObject:a},wall:{ThemeRule:{timeForPopup:n}}}=this.props,o=0===n?5e3:1e3*n;let s=e+1;if(s>=t.length&&(s=0),!isNaN(s)&&t.length>0){const e=t.map((e=>a[e]));this.setState({currentIndex:s}),this.togglePopUpVisibility(s,e[s],o)}},this.togglePopUpVisibility=(e,t,a)=>{this.onLoadPopUp(e,t),setTimeout((()=>{this.props.closePopUP(),setTimeout((()=>{this.loadPopUpWithTimer()}),a)}),a)},this.onClickToCTA=e=>{const{wall:t}=this.props;(0,h.S5)({action:2,wall:t.ThemeInfo.wallId,type:1,feed:e.feedId,post:e.referenceId?e.referenceId:e.id,owner:t.ThemeInfo.ownerId}),(0,h.WI)("Tagbox","ctaClick","cta",e.cta&&e.cta.url?e.cta.url:"")},this.handlePressStart=e=>{const t=e.target.getAttribute("hotspot"),a=e.touches?e.touches[0]:e;!t&&this.setState({startPos:{x:a.clientX,y:a.clientY}})},this.handlePressEnd=(e,t,a)=>{if(!e.target.getAttribute("hotspot")){const n=e.changedTouches?e.changedTouches[0]:e,o={x:n.clientX,y:n.clientY},{startPos:s}=this.state,i=Math.abs(o.x-s.x),l=Math.abs(o.y-s.y),r=5;i<r&&l<r&&this.onClickToShowPopup(t,a)(e)}}}componentDidMount(){var e;const{renderId:t}=this.props.renderId;if(this.onResponsiveTheme(),l.bX&&!l.P2&&!i.FH){const{wall:{ThemeRule:{timeForPopup:e},wall:t}}=this.props,a=0===e?5e3:1e3*e;1==t.ThemeStyle.modal.action&&setTimeout((()=>this.loadPopUpWithTimer()),a)}window.editor?null===(e=document.querySelector(".wall-editor"))||void 0===e||e.addEventListener("scroll",this.autoLoadEditorScrollData):window.addEventListener&&window.addEventListener("scroll",this.autoLoadScrollData),setTimeout((()=>{this.setState({isLoaded:!0})}),2e3),l.ig&&!l.B6&&(0,r.ad)()}componentDidUpdate(e,t){var a;const{containerSize:n}=this.props;(null===(a=e.containerSize)||void 0===a?void 0:a.width)!=(null===n||void 0===n?void 0:n.width)&&this.onResponsiveTheme(),(0,i.b)()&&t.tuchMobile!==this.state.tuchMobile&&this.props.loadMoredata()}UNSAFE_componentWillReceiveProps(e){e!=this.props&&l.B6&&this.onResponsiveTheme()}render(){var e,t,a,o,s;const{wall:i,postData:r,containerSize:d,brandingNetworks:h}=this.props,m=(null===i||void 0===i||null===(e=i.ThemeInfo)||void 0===e?void 0:e.branding)&&(null===r||void 0===r||null===(t=r.completeData)||void 0===t?void 0:t.length)>0;window.onResponsiveTheme=this.onResponsiveTheme;const{isLoaded:g,height:w,isBranding:b}=this.state,f=!(!g||1!==(null===i||void 0===i||null===(a=i.ThemeStyle)||void 0===a?void 0:a.loadMoreStatus)||!M.includes(null===i||void 0===i?void 0:i.ThemeInfo.id));return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("div",{onTouchStart:this.handleTouchStart,className:"tb_theme_container ".concat(l.bX&&!l.aL?"tb_wall_container":""),style:{height:l.bX&&!l.aL?"calc(100vh - ".concat(w,"px)"):null},children:[b&&m&&l.Jx?(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(u,{wall:i,containerSize:d,brandingNetworks:h,wallId:i.ThemeInfo.wallId,themeID:null===i||void 0===i?void 0:i.ThemeInfo.id,user:i.User.userDatabaseType})}):null,(0,c.jsx)(F,{...this.props,...this.state,loadBranding:this.loadBranding,handlePressStart:this.handlePressStart,handlePressEnd:this.handlePressEnd,clickToShowPopUp:this.onClickToShowPopup,onClickToCTA:this.onClickToCTA,onClickPopUpSlider:this.onClickPopUpSlider,onLoadPopUp:this.onLoadPopUp,...l.bX&&{heightUpdate:this.heightUpdate,key:null===r||void 0===r||null===(o=r.postData)||void 0===o?void 0:o.length}}),b&&m&&!l.Jx&&b?(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(u,{wall:i,containerSize:d,brandingNetworks:h,wallId:i.ThemeInfo.wallId,themeID:null===i||void 0===i?void 0:i.ThemeInfo.id})}):null,b&&f&&null!==r&&void 0!==r&&null!==(s=r.postData)&&void 0!==s&&s.length&&b?(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(p,{ThemeStyle:i.ThemeStyle,ThemeInfo:i.ThemeInfo,postData:r})}):null]})})}}const _=(0,o.$j)((e=>({loaderData:e.loaderData,renderId:e.renderId})),(e=>({showPopUP:t=>e((0,d.Bm)(t)),nextData:(t,a,n,o,s,i,l)=>e((0,h.Mk)(t,a,n,o,s,i,l)),closePopUP:()=>e((0,d.zj)())})))(U)},46335:(e,t,a)=>{a.d(t,{$t:()=>S,AB:()=>d,E6:()=>D,Fx:()=>f,GF:()=>F,P:()=>v,RD:()=>g,Rr:()=>h,Sy:()=>b,ad:()=>M,hd:()=>w,i1:()=>p,ok:()=>I,qE:()=>u,sy:()=>T,u$:()=>x,uB:()=>m,uu:()=>k,w5:()=>c});var n=a(35179),o=a(98501),s=a(70656);let i=[],l=!1;const r=new Headers({"Content-Type":"application/json",Authorization:"Bearer ".concat(n.UA),Productdomain:n.yM}),d=e=>{var t;return null===(t=document.getElementById("tb_onsite_btn_id"))||void 0===t?void 0:t.classList.toggle("tb_onsite_btn_disabled",1===e)},h=e=>{var t,a;return null===(t=(a={1:()=>window.onShowDemoPost(1),2:()=>window.hendleFeeds("addFeeds"),3:()=>window.hendleFeeds("manageFeeds")})[e])||void 0===t?void 0:t.call(a)},c=e=>{const t=new Date(1e3*e);return"".concat(["January","February","March","April","May","June","July","August","September","October","November","December"][t.getMonth()]," ").concat(t.getDate(),", ").concat(t.getFullYear())},p=()=>Math.floor(1e4*Math.random()).toString().padStart(4,"0"),u=e=>{try{i.push(e)}catch(t){console.log(t)}},m=e=>e&&""!==e&&!e.includes("ui-avatars"),g=e=>{if(!e)return"0 Byte";const t=Math.floor(Math.log(e)/Math.log(1024));return{size:Math.round(e/Math.pow(1024,t),2),sizeText:["Bytes","KB","MB","GB","TB"][t]}},w=e=>e.startsWith("http://")||e.startsWith("https://")?e:"https://"+e,b=e=>{const t=Date.now()-1e3*e;if(t<6e4)return"just now";const a=[{label:"year",ms:31536e6},{label:"month",ms:2592e6},{label:"week",ms:6048e5},{label:"day",ms:864e5},{label:"hour",ms:36e5},{label:"minute",ms:6e4}].find((e=>{let{ms:a}=e;return t>=a})),n=Math.floor(t/a.ms);return"".concat(n," ").concat(a.label).concat(n>1?"s":""," ago")},f=e=>{try{return null!==e&&void 0!==e&&e.includes("http")?[...new Set(e.match(/(((ftp|https?):\/\/)[\w@:%_\+.~#?&//=]+)/g))].reduce(((e,t)=>e.replaceAll(t,'<a class="text_links_" role="link" target="_blank" href="'.concat(t,'">').concat(t,"</a>"))),e):e}catch{return e}},S=()=>["".concat(o.ZS),"Website Widget"],v=e=>e&&String(e)?unescape(e).split("/").pop().split("/").slice(-1).join().split(".").shift():"",x=["localhost","widget","wall_id="].every((e=>(0,n.F_)(e)))?"taggbox_main":n.Jx||["".concat(n.l,".").concat(n.wq),"".concat(n.l).concat(n.Bu).concat(n.wq),"".concat(n.l,"s.").concat(n.wq)].some((e=>(0,n.F_)(e)))?"tag_main__root":n.ig?"taggShopRoot":"taggbox_main",T=e=>{const t=Math.floor(Math.log10(e)/3)||0;return t?+(e/Math.pow(1e3,t)).toFixed(0)+["","K","M","B","T"][t]:e},I=e=>n.Jx?e:atob(e),P=e=>{if(null===(a=e)||void 0===a?void 0:a.startsWith("#")){const t=parseInt(e.slice(1),16);return{r:t>>16&255,g:t>>8&255,b:255&t}}{var t;const a=(null===e||void 0===e||null===(t=e.match(/\d+/g))||void 0===t?void 0:t.map(Number))||[0,0,0];return{r:a[0],g:a[1],b:a[2]}}var a},y=e=>{const{r:t,g:a,b:n}=P(e);return Math.sqrt((255-t)**2+(255-a)**2+(255-n)**2)<=30},j=e=>{const{r:t,g:a,b:n}=P(e);return Math.sqrt((t-50)**2+(a-50)**2+(n-50)**2)<50},k=(e,t)=>{var a;null!==(a=e)&&void 0!==a&&a.startsWith("rgba")&&(e="#000000");const n=(e,t)=>t.some((t=>null===e||void 0===e?void 0:e.includes(t))),o=e=>n(e,["ffffff","255, 255, 255","#fff"]),s=e=>n(e,["000000","0, 0, 0","#000"]),[i,l]=[y(e),j(e)],[r,d]=[y(t),j(t)];return i&&r||o(e)&&o(t)?"#000000":l&&d||s(e)&&s(t)?"#ffffff":e},D=(e,t,a)=>e&&e.length>0?e.findIndex((e=>e.id===t)):a,M=()=>{try{const{wall:e}=s.Z.getState().appData,{webId:t,wallId:a,ownerId:o}=e.ThemeInfo;l||(window.addEventListener("beforeunload",(()=>{if(0===i.length)return;const e=i.reduce(((e,t)=>e+t),0);e>0?fetch(n.Zl,{method:"POST",headers:r,body:JSON.stringify({playCount:i.length,id:n.ig?t:a,playTime:e,owner:o}),keepalive:!0}).finally((()=>(i=[],l=!1))):(i=[],l=!1)})),l=!0)}catch(e){console.error(e)}},F=e=>new Promise(((t,a)=>Object.assign(new Image,{onload:function(){t({width:this.naturalWidth,height:this.naturalHeight})},onerror:e=>a(new Error("Image loading error: ".concat(e.message))),src:e})))}}]);
"use strict";(self.webpackChunkembed_widget=self.webpackChunkembed_widget||[]).push([[9566],{12701:(e,t,a)=>{a.r(t),a.d(t,{default:()=>E});var i=a(9950),o=a(10300),r=a(89379),s=a(66345),n=a(92687),d=a(54199),l=a(10467),p=a(83744),c=a(21850),u=a(18459),h=a(44414),m=e=>{var{product:t,wall:a,onsetProductImg:o,openAddtocart:s,item:n,setOnProductDetails:d}=e,{ThemeInfo:m,ProductSetting:v}=a,[g,w]=(0,i.useState)(!1),[_,x]=(0,i.useState)(!1),P=(e,t)=>(0,c.hq)({type:1,action:2,wall:m.webId,product_id:t.id,post:n.referenceId,owner:m.ownerId,feed:n.feedId,currency:t.currencyCode,price:t.discount>0?t.discount:t.price}),I=v.Button,D=function(){var e=(0,l.A)(function*(){x(!0);var e={};if(t&&t.url)try{var a;if(140717==m.ownerId||1==(null===v||void 0===v||null===(a=v.Button)||void 0===a?void 0:a.pdp_target))y(t.url),o(t.image),x(!1),P(0,t);else{var i="magento"==t.createdFrom||!1;""!=t.createdFrom?(0,p.YS)(t.url,i,{productId:t.sku,storeId:t.storeId}).then(a=>{var n;if(i&&0==a.status)e[t.id]={data:{available:!0},showCart:140717!==m.ownerId};else{var d,l=i&&(null===a||void 0===a||null===(d=a.data)||void 0===d?void 0:d.data)||(null===a||void 0===a?void 0:a.data),p=i?{available:!0}:{};e[t.id]={data:null!==l&&void 0!==l&&l.id?(0,r.A)((0,r.A)({},l),p):null,showCart:(null===l||void 0===l?void 0:l.id)&&140717!==m.ownerId}}o(null!==a&&void 0!==a&&null!==(n=a.data)&&void 0!==n&&n.featured_image?a.data.featured_image:t.image),x(!1),s(e,t.id,t)}).catch(e=>{console.log("error",e),y(t.url),o(t.image),x(!1),P(0,t)}):(y(t.url),o(t.image),x(!1),P(0,t))}}catch(n){console.log("error",n),y(t.url),x(!1)}});return function(){return e.apply(this,arguments)}}(),y=e=>{var{Button:t}=v,a=e;2==parseInt(t.newTab)?window.parent.location.href=a:window.open(a,"_blank")};return(0,h.jsxs)("div",{className:"tb_rpp_pro ".concat(g?"ts_reelTheme_No_Product":""),children:[(0,h.jsx)("div",{className:"tb_rpp_pro_wrap",children:(0,h.jsx)(u.A,{ImageClass:"tb_rpp_pro_img",media:t.image},"pro-".concat(t.id))}),(0,h.jsxs)("div",{className:"tb_rpp_pro_cont",children:[(0,h.jsx)("div",{className:"tb_rpp_pro_title",children:t.title}),t.price>0||t.discount>0?(0,h.jsxs)("div",{className:"tb_rpp_p_wrap",children:[(0,h.jsxs)("div",{className:"tb_rpp_p",children:[t.currency,t.discount>0?t.discount:t.price]}),0==t.discount||t.price==t.discount?(0,h.jsx)(h.Fragment,{}):(0,h.jsxs)("div",{className:"tb_rpp_p tb_rpp_d_p",children:[t.currency,t.price]})]}):null,(0,h.jsxs)("div",{className:"tb_rpp_btn".concat(_?" tb_rpp_btn_spinner":""),disabled:_,onClick:()=>{D()},children:[I.text," "]})]})]},t.id)};const v=(0,i.memo)(m);var g=a(78262),w=a(38092),_=a.n(w),x=a(76506);class P extends i.PureComponent{constructor(e){super(e),this.setVideoLoaded=e=>{this.setState({videoLoaded:e})},this.onUpdateTime=e=>{try{this.setState({played:this.state.played+e.playedSeconds})}catch(t){console.log(t)}},this.state={loadError:!1,paddingBottom:100,videoLoaded:!1,played:0}}componentWillUnmount(){var{played:e}=this.state;(0,x.HI)(e)}render(){var e,t,a,{VideoClass:i,Post:o,controls:r,handleVideoEnded:s,muted:n,currentView:d,inView:l}=this.props,{videoLoaded:p}=this.state,{media:c,height:u,width:m,id:v,link:g,networkId:w}=o;return(0,h.jsxs)("div",{className:"".concat(i,"_wrap_"),style:{paddingBottom:"100vh"},children:[(0,h.jsx)(_(),{className:"".concat(i," tb_media-").concat(v),url:l?c.video.full:null===c||void 0===c||null===(e=c.image)||void 0===e?void 0:e.small,"data-height":u,"data-width":m,"data-type":"video","data-network":w,"data-link":g,"data-item-id":v,"data-load":0,config:{facebook:{appId:"117029975354072",attributes:{"data-width":m,"data-height":u,poster:null===c||void 0===c||null===(t=c.image)||void 0===t?void 0:t.small}},file:{attributes:{preload:"auto",poster:null===c||void 0===c||null===(a=c.image)||void 0===a?void 0:a.small,playsInline:!0}}},autoPlay:d?1:0,loop:!0,muted:d&&n,volume:d&&n?0:1,playsinline:!0,playing:d,height:"100%",width:"100%",controls:r,onReady:()=>this.setVideoLoaded(!0),onProgress:this.onUpdateTime,onEnded:s||null},"".concat(v,"-").concat(d,"-").concat(g)),p?null:(0,h.jsx)("div",{className:"tb_rpp_v_spinner",children:(0,h.jsx)("div",{})})]})}}var I=a(53556),D=JSON.parse(window.localStorage.getItem("mediaDimension"));class y extends i.PureComponent{constructor(e){super(e),this.mediaSize=e=>this.props.mediaSizeCallback(e),this.state={mediaSize:{height:null!=D?D[0]:"85vh",width:null!=D?D[1]:"85vh"}}}render(){var{Post:e,wallID:t,size:a,onUpdateProdImgIdx:i,inView:o}=this.props;return(0,h.jsx)("div",{className:"tb_rp_media_holder",children:(0,h.jsx)(I.eB,{options:{direction:"ltr",pagination:!0,arrows:!1,speed:400,rewind:!0,perPage:1,perMove:1,gap:0,updateOnMove:!0,wheel:!1,paginationDirection:"ltr",classes:{pagination:"splide__pagination tb_rp_bullet"}},onMoved:(e,t)=>i(t),children:e.mediaList.map((i,s)=>(0,h.jsx)(I.Nn,{children:[2,4].includes(i.type)?(0,h.jsx)(g.A,{ImageClass:"tb_rp_image",Post:e,mediaOnly:i,size:a,multiPic:1,multiKey:s,hotspot:!!i.product.length,inView:!0}):[3,5].includes(i.type)?(0,h.jsx)(P,{VideoClass:"tb_rp_video",media:i.video.full,mediaPoster:i.image.original,Post:(0,r.A)((0,r.A)({},e),{},{media:{video:i.video,image:i.image}}),wallID:t,size:a,isCover:!0,controls:!1,autoPlay:!0,muted:false,index:s,inView:o}):null},s))})},e.id)}}var b=e=>{var t,{Post:a,muted:i,index:o,wallID:s,inView:n,currentView:d}=e,l=!1;return a.mediaList&&a.mediaList.length>0?(0,h.jsx)(y,(0,r.A)({Post:a},e)):[2,4].includes(a.type)&&n?(0,h.jsx)(g.A,{ImageClass:"tb_rp_image",Post:a,size:l,hotspot:!(null===a||void 0===a||null===(t=a.product)||void 0===t||!t.length),blurBG:!1,observer:!1,index:o,inView:n}):[3,5].includes(a.type)&&n?(0,h.jsx)(P,{VideoClass:"tb_rp_video",Post:a,size:l,wallID:s,isCover:!0,controls:!1,currentView:d,muted:i,handleVideoEnded:()=>{},index:o,inView:n}):null};const S=(0,i.memo)(b);var C=a(80415);function f(e){e.style.setProperty("visibility","visible","important"),e.style.setProperty("opacity","1","important"),e.style.setProperty("display","flex","important"),e.style.setProperty("transform","none","important"),e.style.setProperty("clip-path","initial","important"),e.style.setProperty("border","none","important")}class j extends i.PureComponent{render(){return(0,h.jsx)("a",{href:C.om,target:"_blank",ref:e=>{e&&(e.style.setProperty("margin-right","15px","important"),e.style.setProperty("width","90px","important"),e.style.setProperty("height","auto","important"),f(e))},children:(0,h.jsx)("img",{ref:e=>{e&&(e.style.setProperty("width","100%","important"),e.style.setProperty("height","auto","important"),f(e))},src:"".concat(C.th,"media/logos/").concat("tagbox-brand.svg")})})}}var A=e=>{var t,a,o,r,{wall:s,item:n,onsetProductImg:d,openAddtocart:l,index:p,currentView:c,muteToggle:u,muted:m,inView:g}=e,w=!![3,5].includes(n.type),{ThemeInfo:_,ProductSetting:x}=s,[P,I]=(0,i.useState)(0),D=e=>(0,h.jsx)("div",{className:"tb_rpp_slide_wrap",children:e.products&&e.products.map((e,t)=>(0,h.jsx)(v,{product:e,openAddtocart:l,onsetProductImg:d,wall:s,item:n},t))});return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(S,{Post:n,wallID:_.wallId,onUpdateProdImgIdx:e=>{I(e)},ownerId:_.ownerId,ThemeID:_.id,wall:s,muted:m,currentView:c,index:p,inView:g}),(0,h.jsxs)("div",{className:"tb_rp_content",children:[x&&n.isProduct?(0,h.jsx)(D,{products:null!==(t=n.mediaList)&&void 0!==t&&t.length?null!==(a=n.mediaList)&&void 0!==a&&null!==(o=a[P])&&void 0!==o&&null!==(r=o.product)&&void 0!==r&&r.length?n.mediaList[P].product:[]:n.products}):null,w?(0,h.jsx)("div",{className:"tb_rp_mute_btn",onClick:u,children:(0,h.jsx)("div",{className:"tb__icon tb-".concat(m?"mute":"unmute"),children:(0,h.jsx)("div",{})})}):null,_.branding?(0,h.jsx)(j,{wallId:_.wallId,themeID:_.id}):null]})]})};const N=(0,i.memo)(A);var T=a(52867);class k extends i.Component{constructor(e){var t;super(e),this.setMuted=()=>this.setState({muted:!this.state.muted}),this.onMediaUpdate=()=>this.setState({isAuthorImagevalid:!1}),this.onAddToCart=(e,t,a,i)=>{var{wall:o}=this.props,{webId:n,wallId:d,ownerId:l}=o.ThemeInfo;setTimeout(()=>{this.setState({addCartSetTime:!0})},100);var p={type:1,action:2,wall:s.aD?d:n,feed:i.feedId,post:i.referenceId?i.referenceId:i.id,owner:l,product_id:a.id,currency:a.currency,currencyCode:a.currencyCode,price:a.discount>0?a.discount:a.price};this.setState({allProductDetails:e,addtoCartPopup:!0,selectedProductDetails:e[t],tagshopProductDeatil:(0,r.A)((0,r.A)({},a),{},{trackingData:p})})},this.requestData=()=>{var{wall:e,appendData:t,hasMoreData:a,loaderData:i}=this.props,{webId:o,wallId:r}=e.ThemeInfo,n=e.ThemeStyle.totalPosts,d=Math.floor(Date.now()/1e3);a&&!i.isShowMoreLoading&&this.props.nextData(s.MH?o:r,d,n,t.networkID,t.after,t.heightEvent)},this.onItemChange=e=>this.setState({item:e}),this.startSplideSlide=e=>{this.setState({activeSlide:e.index})},this.currentSplideSlide=e=>{this.onPopUpTrack(e.index),this.setState({activeSlide:e.index}),this.props.hasMoreData&&e.index==this.props.completeData.length-2&&this.requestData()},this.onPopUpTrack=e=>{try{var{wall:t,completeData:a}=this.props,{ThemeInfo:i}=t,o=a[e]?a[e]:null;if(o){var n={feed:o.feedId,post:o.referenceId?o.referenceId:o.id},d={action:2,wall:i.webId,feed:o.feedId,post:o.referenceId?o.referenceId:o.id,type:3,owner:i.ownerId};(0,c.hq)(s.Qy?d:(0,r.A)((0,r.A)({action:2,wall:i.webId},n),{},{owner:i.ownerId,type:3}))}}catch(l){console.log("Error in PopUp Tracking",l)}},this.onClickClosePopUp=e=>this.setState({addtoCartPopup:!1,continueShopping:!1,selectedProductDetails:null,addCartSetTime:!1}),this.onClickCheckOut=e=>this.setState({addtoCartPopup:!0,continueShopping:!1}),this.sliderRef=i.createRef(),this.state={currentIndex:null===(t=this.props)||void 0===t?void 0:t.currentIndex,item:this.props.item,windowWidth:window.innerWidth,isAuthorImagevalid:!0,isHotspot:!1,addtoCartPopup:!1,allProductDetails:null,selectedProductId:null,selectedProductDetails:null,continueShopping:!1,selectedVariant:null,showAddToCart:!1,productLoading:!0,productImg:"",tagshopProductDeatil:null,muted:!!(0,T.RP)(),activeSlide:0,addCartSetTime:!1,selectedProdDetails:null,tagProdDetail:null},this.splideRef=i.createRef()}componentDidMount(){var{currentIndex:e,item:t}=this.props,a=(0,x.hz)(t.author.picture);this.setState({currentIndex:e,item:t,isAuthorImagevalid:a})}UNSAFE_componentWillReceiveProps(e){var{currentIndex:t,item:a}=e,i=(0,x.hz)(a.author.picture);this.setState({currentIndex:t,item:a,isAuthorImagevalid:i})}render(){var{onClosePopUp:e,slideWithArrowKeys:t,wall:a,completeData:i}=this.props,{currentIndex:o,item:r,addtoCartPopup:s,selectedProductDetails:l,continueShopping:p,productImg:c,tagshopProductDeatil:u,addCartSetTime:m,muted:v,activeSlide:g}=this.state;return(0,h.jsxs)("div",{className:"modalId".concat(r.id," tb_rp_modal ").concat(m?"tb_rp_add_cart_m":""),onKeyDown:t,onKeyPress:t,onLoad:t,onClick:t=>t.currentTarget==t.target&&e(t),children:[(0,h.jsxs)("div",{className:"tb_rp_dialog",children:[s||p?null:(0,h.jsx)("div",{className:"tb_reel_close_btn",onClick:e,children:(0,h.jsx)("div",{className:"tb__icon tb-close-thin",children:(0,h.jsx)("div",{})})}),(0,h.jsx)("div",{className:"tb_time_line_wrap",children:(0,h.jsx)("div",{className:"tb_time_line",children:(0,h.jsx)("div",{})})}),(0,h.jsx)(I.eB,{ref:this.splideRef,options:{direction:"ttb",height:window.innerHeight,start:o,wheel:!1,releaseWheel:!0,sensitivity:1,drag:!0,pagination:!1,arrows:!1,isNavigation:!1,updateOnMove:!0},onMoved:this.currentSplideSlide,onMounted:this.startSplideSlide,children:i&&i.length>0?i.map((t,i)=>(0,h.jsx)(I.Nn,{children:(0,h.jsx)(N,{currentView:g===i,onClosePopUp:e,wall:a,item:t,openAddtocart:(e,a,i)=>this.onAddToCart(e,a,i,t),onsetProductImg:e=>this.setState({productImg:e}),muteToggle:this.setMuted,muted:v,inView:Math.abs(g-i)<=2},"".concat(t.id,"-").concat(i))},"".concat(t.id,"-").concat(i))):null})]}),s&&l?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:"tb_rp_cart_overlay",children:(0,h.jsx)("div",{})}),(0,h.jsx)("div",{className:"tb_rp_cart_modal",children:(0,h.jsxs)("div",{className:"tb_rp_cart_body",children:[(0,h.jsx)("div",{className:"ts_reel_close_btn tb_reel_close_btn",onClick:s&&!p?this.onClickClosePopUp:p?e=>this.setState({addtoCartPopup:!0,continueShopping:!1}):null,children:(0,h.jsx)("div",{className:"tb__icon tb-close-thin",children:(0,h.jsx)("div",{})})}),(0,h.jsx)("div",{className:"tb_rp_cart_wrap",children:l&&Object.keys(l).length>0?"magento"==(null===u||void 0===u?void 0:u.createdFrom)?(0,h.jsx)(n.A,{productImg:c,addtoCartPopup:s,productDetails:l,tagshopProductDeatil:u,closeCart:e=>this.setState({addtoCartPopup:!1,continueShopping:!1,selectedProductDetails:null}),onAddToCart:()=>this.setState({continueShopping:!0}),onSelectedVariant:e=>this.setState({selectedVariant:e}),wall:a,closePopUp:this.props.onClosePopUp}):(0,h.jsx)(d.A,{productImg:c,addtoCartPopup:s,productDetails:l,tagshopProductDeatil:u,closeCart:e=>this.setState({addtoCartPopup:!1,continueShopping:!1,selectedProductDetails:null}),onAddToCart:()=>this.setState({continueShopping:!0}),onSelectedVariant:e=>this.setState({selectedVariant:e}),wall:a,closePopUp:this.props.onClosePopUp}):null})]})})]}):null]})}}const U=(0,o.Ng)(e=>{var{appData:t}=e;return{loaderData:e.loaderData,appendData:t.postData.appendData,hasMoreData:!t.postData.hasMoreData[0]||0!=t.postData.hasMoreData[0].hasMoreData&&(!t.postData.hasMoreData[t.postData.appendData.networkID]||t.postData.hasMoreData[t.postData.appendData.networkID].hasMoreData)}},e=>({nextData:(t,a,i,o,r,s,n)=>e((0,c.wF)(t,a,i,o,r,s,n))}))((0,i.memo)(k));var V=a(93152);class M extends i.PureComponent{constructor(){super(...arguments),this.state={isEnable:0,eventData:{},shareText:"SHARE",viewOnText:"View on",currentIndex:null,completeData:{},personalization:{},url:null,imgData:[]},this.closeCommercePopUP=e=>{this.setState({isEnable:0,currentIndex:null},()=>this.props.closePopUP());var t=document.getElementsByTagName("html");t&&t[0]&&(t[0].style.overflow="")},this.getCommercePopUPEvent=e=>{null!==e&&void 0!==e&&e.card&&this.setState({url:"",isEnable:1,eventData:e,currentIndex:e.index,completeData:e.idArray,viewOnText:e.viewOnText,shareText:e.shareText,windowParent:e,imgData:e.imgData,personalization:e.personalization},()=>this.CommercePopUPSlideWithArrowKey())},this.featuredPopSliderChangeIndex=e=>this.updateCurrentInde(e),this.SliderWithKey=e=>this.updateCurrentInde(e),this.updateCurrentInde=e=>{var{eventData:t}=this.state;-1===e?this.setState({currentIndex:t.idArray.length-1}):this.setState({currentIndex:t.idArray.length===e?0:e})},this.CommercePopUPSlideWithArrowKey=e=>{var{personalization:t}=this.state;if(t&&1===t.popupSlideShow){var a=this;(e=e||window.event)&&e.keyCode&&void 0!==e.keyCode&&(37===e.keyCode?a.SliderWithKey(a.state.currentIndex-1):39===e.keyCode?a.SliderWithKey(a.state.currentIndex+1):27===e.keyCode&&this.closeCommercePopUP())}}}componentDidMount(){var{data:e}=this.props;this.getCommercePopUPEvent(e);var t=document.getElementsByTagName("html");t&&t[0]&&(t[0].style.overflow="hidden")}componentDidUpdate(e){this.props.data!==e.data&&this.getCommercePopUPEvent(this.props.data)}UNSAFE_componentWillReceiveProps(e){var{postData:t}=e,{completeData:a,eventData:i}=this.state;if(a.length!=t.postData.length){var o=t.postData.map(e=>t.completeDataObject[e]).filter(e=>!String(e.id).includes("free_add_"));i.idArray=o,this.setState({completeData:o,eventData:i},()=>{var{currentIndex:e}=this.state;this.setState({currentIndex:e+1})})}}render(){var{viewOnText:e,isEnable:t,currentIndex:a,personalization:i,completeData:o,eventData:r,url:s,imgData:n}=this.state,{wall:d,webFilters:l}=this.props,p=null;return p=-1===a?o[r.idArray.length-1]:o[a],1===t&&d&&Object(o||{}).length>0?(0,h.jsx)(U,{webFilters:l,wall:d,item:p,completeData:o,onClosePopUp:this.closeCommercePopUP,currentIndex:a,personalization:i,viewOnText:e,slideWithArrowKeys:this.CommercePopUPSlideWithArrowKey,featuredPopSliderChangeIndex:this.featuredPopSliderChangeIndex,hostUrl:s,imgData:n}):null}}const E=(0,o.Ng)(e=>({wall:e.appData.wall,webFilters:e.appData.webFilters}),e=>({closePopUP:t=>e((0,V.ng)(t))}))(M)}}]);
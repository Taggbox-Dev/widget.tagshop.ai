"use strict";(self.webpackChunkembed_widget=self.webpackChunkembed_widget||[]).push([[9874,9924],{69924:(t,e,o)=>{o.r(e),o.d(e,{default:()=>n});var a=o(9950),i=o(89874),l=o(80415),s=o(45285),d=o(44414);class n extends a.PureComponent{constructor(t){super(t),this.state={mediaLoaded:!1}}UNSAFE_componentWillReceiveProps(t){var{Post:e}=t,{media:o}=e;this.props.Post!==e&&this.setState({imgSize:{small:o.image.small,large:o.image.large,orignal:o.image.orignal}})}render(){var{Post:t,opacity:e,mediaSize:o,Products:a,Item:n,ThemeInfo:c,showTooltip:r}=this.props,{mediaLoaded:p}=this.state,u=n||t.media,h=!!(a&&a.length>0&&t.hotspot),m={opacity:e,filter:p?"blur(2px)":null,aspectRatio:"".concat(o.width,"/").concat(o.height)};return(0,d.jsxs)("div",{className:"tb_post_modal_img_holder",children:[h?(0,d.jsx)(i.default,{isPopup:!0,products:a,Post:t,showTooltip:r}):null,(0,d.jsx)("img",{className:"tb_post_modal_img_",decoding:"async",src:u.image.small,srcSet:"".concat(u.image.large,", 991w ").concat(u.image.small,", 480w"),sizes:o&&o.width,alt:"".concat(u.title," ").concat(t.id),"data-link":t.link,"data-network":t.networkId,"data-wall-id":c.wallId,"data-owner-id":c.ownerId,"data-item-id":t.id,"data-feed-id":c.feedId?c.feedId:"","data-load":"0",onLoad:this.handleImageLoad,onError:t=>{t.target.src="".concat(l.th,"media/error/no-image.svg"),t.target.srcset="".concat(l.th,"media/error/no-image.svg"),(0,s.bs)(t)},loading:"lazy",draggable:"false",width:o&&o.width,height:o&&o.height,style:m})]})}}},89874:(t,e,o)=>{o.r(e),o.d(e,{default:()=>h});var a=o(89379),i=o(9950),l=o(10300),s=o(1823),d=o(21850),n=o(82652),c=o(44414),r=(0,i.memo)(t=>{var{item:e}=t,o=e.discount>0&&e.discount!==e.price,a=e.discount>0?e.discount:e.price;return(0,c.jsxs)("a",{hotspot:1,href:e.url,target:"_blank",rel:"noopener noreferrer",className:"tb_tooltip_wrap",children:[(0,c.jsx)("div",{hotspot:1,className:"tb_p_tooltip_title",children:e.title}),o&&(0,c.jsxs)("div",{hotspot:1,className:"tb_p_tooltip_price tb_price_disabled",children:[e.currency,e.price]}),(e.price>0||e.discount>0)&&(0,c.jsxs)("div",{hotspot:1,className:"tb_p_tooltip_price",children:[e.currency,a]})]})}),p=t=>{var{products:e,appData:o,Post:l,showTooltip:p,isPopup:u}=t,[h,m]=(0,i.useState)(null),_=(0,i.useMemo)(()=>{var t,e;return(null===o||void 0===o||null===(t=o.wall)||void 0===t||null===(e=t.ProductSetting)||void 0===e?void 0:e.Hotspot)||{}},[o]);(0,i.useEffect)(()=>{if(p){var t=e.findIndex(t=>t.id===p);-1!==t&&m(t)}else m(null)},[p,e]);var g=(0,i.useCallback)(t=>{var e,a,i,s;null!==o&&void 0!==o&&o.wall&&(0,d.hq)({type:1,action:2,wall:null===o||void 0===o||null===(e=o.wall)||void 0===e||null===(a=e.ThemeInfo)||void 0===a?void 0:a.webId,product_id:t.id,post:l.referenceId,owner:null===o||void 0===o||null===(i=o.wall)||void 0===i||null===(s=i.ThemeInfo)||void 0===s?void 0:s.ownerId,feed:l.feedId,currency:t.currencyCode,price:Number(t.discount)>0?t.discount:t.price})},[o,l]),v=(0,i.useCallback)((t,e)=>{t.stopPropagation(),g(e),window.open(e.url,"_blank")},[g]);return null!==_&&void 0!==_&&_.status?e.map((t,e)=>{var o="hotspot-".concat(t.id,"-").concat(e).concat(u?"-pop":""),i=h===e;return(0,c.jsxs)("div",{id:o,className:"tb_hotspot_dot".concat(i?" tb_hotspot_active_":""),role:"button",style:{top:t.hotspot.top,left:t.hotspot.left},onMouseEnter:()=>m(e),onMouseLeave:()=>m(null),onClick:e=>{v(e,t)},"data-tooltip-offset":7,children:[(0,c.jsx)("div",{hotspot:1,className:"tb_hotspot__ ".concat(0===_.type?"tb_hotspot_ani__":""),children:e+1}),(0,c.jsx)(n.A,{wallId:o,children:(0,c.jsx)(s.m_,(0,a.A)((0,a.A)({appendTo:"body","data-tooltip-id":"tooltip-".concat(t.id,"-").concat(e).concat(u?"-pop":""),className:"tb_pro_tooltip",anchorSelect:"#".concat(o),clickable:!0},u?{isOpen:i}:{}),{},{children:(0,c.jsx)(r,{item:t})}),e)})]},"".concat(t.id,"-").concat(e))}):null},u=(0,i.memo)(p);const h=(0,l.Ng)(t=>({appData:t.appData}))(u)}}]);
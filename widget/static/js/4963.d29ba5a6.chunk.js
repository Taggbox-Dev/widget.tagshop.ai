"use strict";(self.webpackChunkembed_widget=self.webpackChunkembed_widget||[]).push([[4963],{40692:(t,e,s)=>{s.d(e,{Kc:()=>n,PC:()=>i,Xq:()=>d,zt:()=>l});var o=s(74569),a=s.n(o),r=s(46535);const i=t=>a().get("".concat(t,".js")),d=t=>a().post("".concat(r.Mw,"/cart/add.js"),t),l=()=>a().get("".concat(r.Mw,"/cart.js")),n=t=>{a().post(r.WK,t).then((t=>{})).catch((t=>console.log("error",t)))}},84963:(t,e,s)=>{s.r(e),s.d(e,{default:()=>I});var o=s(72791),a=s(77581),r=s(11225),i=s(2703),d=s(40692),l=s(70188),n=s(80184);class c extends o.Component{constructor(){super(...arguments),this.state={allSizes:null,allColors:null,selectedColor:null,selectedSize:null,availableSize:[],productImage:"",optionError:!1},this.getOptions=()=>{const{productDetails:t}=this.props;var e=[],s=[];if(t&&t.options&&t.options.length&&t.options.map((t=>{t.values&&t.values.length&&("color"==t.name.toLowerCase()&&(e=t.values,this.setState({selectedColor:t.values[0]})),"size"==t.name.toLowerCase()?s=t.values:(e=t.values,this.setState({selectedColor:t.values[0]})))})),this.setState({allSizes:s,allColors:e}),e&&e.length)s&&s.length&&this.checkAvablity(e[0]);else{var o=[];t.variants.map((t=>{t.available&&(o.includes(t.option1)||o.push(t.option1))})),this.setState({availableSize:o})}},this.checkAvablity=t=>{const{variants:e}=this.props.productDetails;this.getProductImage();var s=[];e.map((e=>{var o;e.option1.toLowerCase()==t.toLowerCase()&&e.available&&(s.includes(e.option2)||s.push(e.option2)),(null===(o=e.option2)||void 0===o?void 0:o.toLowerCase())==t.toLowerCase()&&e.available&&(s.includes(e.option1)||s.push(e.option1))})),this.setState({availableSize:s})},this.onAddToCart=()=>{const{variants:t}=this.props.productDetails,{selectedColor:e,selectedSize:s,allColors:o,allSizes:a}=this.state;if(s&&""!=s||!a||!a.length)if(1==t.length)this.props.onSelectedVariant(t[0]),this.addProductsToCart(t[0]);else{var r=null,i=null;t.map((t=>{e&&e.length?t.options.includes(e)&&t.options.includes(s)?r=t:t.options.includes(e)&&(i=t):t.options.includes(s)&&(this.props.onSelectedVariant(t),this.addProductsToCart(t))})),null!=r?(this.props.onSelectedVariant(r),this.addProductsToCart(r)):i?(this.props.onSelectedVariant(i),this.addProductsToCart(i)):console.log("Shopify Variants Error!!")}else this.setState({optionError:!0})},this.addProductsToCart=t=>{const{wall:e,tagshopProductDeatil:s}=this.props,o=new FormData;o.append("id",t.id),o.append("quantity",1),(0,d.Xq)(o).then((o=>{const a={variant:t.options?t.options.join(","):"",price:t.price/100,wall:e.Wall.wallId,website_id:"website"==r.mV?e.Wall.id:0,product_id:s.UgcProduct.id,quantity:1,post:s.post_id};(0,d.Kc)(a),this.props.onAddToCart()})).catch((t=>{this.props.onAddToCart()}))},this.getColorImage=t=>{const{productDetails:e}=this.props;if(t){var s;const o=e.variants.find((e=>e.options.includes(t)));return o.featured_image?null===(s=o.featured_image)||void 0===s?void 0:s.src:this.props.productImg}},this.getProductImage=()=>{const{productDetails:t}=this.props,{selectedColor:e}=this.state;if(e){var s;const o=t.variants.find((t=>t.options.includes(e)));this.setState({productImage:o.featured_image?null===(s=o.featured_image)||void 0===s?void 0:s.src:this.props.productImg})}else this.setState({productImage:t.featured_image})}}componentDidMount(){this.getOptions(),this.getProductImage()}render(){var t;const{closeAddtocart:e,addtoCartPopup:s,productDetails:o,onSelectedVariant:a,productImg:r,wall:i,tagshopProductDeatil:d}=this.props,{allColors:c,allSizes:p,selectedColor:u,availableSize:h,selectedSize:m,productImage:_,optionError:g}=this.state;return(0,n.jsx)("div",{className:"ts_rt_addToCart_mobile_modal","aria-hidden":"true",children:(0,n.jsxs)("div",{className:"ts_rt_addToCart_mobilePopup_modalDialog",role:"document",children:[(0,n.jsx)("div",{className:"ts_rt_addToCart_mobilePopup_close_btn",onClick:e,children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",children:(0,n.jsx)("path",{d:"M14.5352 14.4531C14.2773 14.7109 13.8047 14.7109 13.5469 14.4531L7.875 8.73828L2.16016 14.4531C1.90234 14.7109 1.42969 14.7109 1.17188 14.4531C0.914062 14.1953 0.914062 13.7227 1.17188 13.4648L6.88672 7.75L1.17188 2.07812C0.914062 1.82031 0.914062 1.34766 1.17188 1.08984C1.42969 0.832031 1.90234 0.832031 2.16016 1.08984L7.875 6.80469L13.5469 1.08984C13.8047 0.832031 14.2773 0.832031 14.5352 1.08984C14.793 1.34766 14.793 1.82031 14.5352 2.07812L8.82031 7.75L14.5352 13.4648C14.793 13.7227 14.793 14.1953 14.5352 14.4531Z",fill:"white"})})}),(0,n.jsx)("div",{className:"ts_rt_addToCart_mobilePopup_modalContent",children:(0,n.jsx)("div",{className:"ts_rt_addToCart_mobilePopup_modalBody",children:(0,n.jsxs)("div",{className:"ts_rt_addToCart_mobilePopup_modalBody_inner",children:[(0,n.jsxs)("div",{className:"ts_rt_addToCart_mobilePopup_product_deatil",children:[(0,n.jsx)("div",{className:"ts_rt_addToCart_mobilePopup_productImage",children:(0,n.jsx)("img",{src:_||l.O1,alt:"product img",onError:t=>this.setState({productImage:l.O1})})}),(0,n.jsxs)("div",{className:"ts_rt_addToCart_mobilePopup_productDeatil_rightAlign",children:[(0,n.jsx)("div",{className:"ts_rt_addToCart_mobilePopup_productTitle",children:o.title}),(0,n.jsxs)("div",{className:"ts_rt_addToCart_mobilePopup_productPrice",children:[null===d||void 0===d||null===(t=d.UgcProduct)||void 0===t?void 0:t.price_currency_symbol,(null===d||void 0===d?void 0:d.UgcProduct.product_discount)>0?null===d||void 0===d?void 0:d.UgcProduct.product_discount:null===d||void 0===d?void 0:d.UgcProduct.product_price]})]})]}),(0,n.jsxs)("div",{className:"ts_rt_addToCart_mobilePopup_productDetail",children:[g?(0,n.jsx)("div",{className:"ts_addToCart_selectOptionsError",children:"Please select any one variant to proceed!"}):(0,n.jsx)(n.Fragment,{}),(0,n.jsx)("div",{className:"ts_rt_addToCart_mobilePopup_colorPalate_section",children:c&&c.length?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"ts_rt_addToCart_mobilePopup_colorHeading",children:"Color:"}),(0,n.jsx)("div",{className:"ts_rt_addToCart_mobilePopup_colorPalate",children:c.map((t=>(0,n.jsx)("div",{className:"ts_rt_addToCart_mobilePopup_color ".concat(u==t?"active":""),children:(0,n.jsx)("div",{className:"ts_rt_addToCart_mobilePopup_colorTile",style:{backgroundColor:t},onClick:()=>this.setState({selectedColor:t},(()=>this.checkAvablity(t))),children:(0,n.jsx)("img",{src:this.getColorImage(t),style:{height:"100%",width:"100%"},onError:t=>t.target.src=l.O1})})})))})]}):(0,n.jsx)(n.Fragment,{})}),p&&p.length?(0,n.jsxs)("div",{className:"ts_rt_addToCart_mobilePopup_sizeChart",children:[(0,n.jsx)("div",{className:"ts_rt_addToCart_mobilePopup_sizeChart_label",children:"Size"}),p.map((t=>h.includes(t)?(0,n.jsx)("div",{className:"ts_rt_addToCart_mobilePopup_sizebutton  ".concat(t==m?"active":""),onClick:()=>this.setState({selectedSize:t,optionError:!1}),children:t}):(0,n.jsxs)("div",{className:"ts_rt_addToCart_mobilePopup_sizebutton ts_productSize_unvavailable",children:[(0,n.jsx)("span",{className:"ts_rt_addToCart_mobilePopup_productSize_unvavailable_cross"}),t]})))]}):(0,n.jsx)(n.Fragment,{}),(0,n.jsxs)("div",{className:"ts_rt_addToCart_actions",children:[(0,n.jsx)("div",{className:"ts_rt_addToCart_actions_cancel",onClick:e,children:"Cancel"}),(0,n.jsx)("div",{className:"ts_rt_addToCart_actions_addCart",onClick:this.onAddToCart,children:"ADD TO CART"})]}),i&&i.UserRule&&1==i.UserRule.branding?(0,n.jsx)("div",{className:"ts_rt_branding ts_rt_branding_addToCart",children:(0,n.jsx)("img",{src:l.jS,alt:"brand logo"})}):null]})]})})})]})})}}var p=s(46535);class u extends o.Component{constructor(){super(...arguments),this.state={cartItems:1}}componentDidMount(){(0,d.zt)().then((t=>{const{item_count:e}=t.data;e&&this.setState({cartItems:e})})).catch((t=>{console.error(t)}))}render(){var t;const{productDetails:e,closeAddtocart:s,productImg:o,wall:a,tagshopProductDeatil:r,onBack:i}=this.props;return(0,n.jsx)("div",{className:"ts_rt_proceedCheckout_modal","aria-hidden":"true",children:(0,n.jsxs)("div",{className:"ts_rt_proceedCheckout_modalDialog",role:"document",children:[(0,n.jsx)("div",{className:"ts_rt_proceedCheckout_close_btn",onClick:i,children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",children:(0,n.jsx)("path",{d:"M14.5352 14.4531C14.2773 14.7109 13.8047 14.7109 13.5469 14.4531L7.875 8.73828L2.16016 14.4531C1.90234 14.7109 1.42969 14.7109 1.17188 14.4531C0.914062 14.1953 0.914062 13.7227 1.17188 13.4648L6.88672 7.75L1.17188 2.07812C0.914062 1.82031 0.914062 1.34766 1.17188 1.08984C1.42969 0.832031 1.90234 0.832031 2.16016 1.08984L7.875 6.80469L13.5469 1.08984C13.8047 0.832031 14.2773 0.832031 14.5352 1.08984C14.793 1.34766 14.793 1.82031 14.5352 2.07812L8.82031 7.75L14.5352 13.4648C14.793 13.7227 14.793 14.1953 14.5352 14.4531Z",fill:"white"})})}),(0,n.jsx)("div",{className:"ts_rt_proceedCheckout_modalContent",children:(0,n.jsx)("div",{className:"ts_rt_proceedCheckout_modalBody",children:(0,n.jsxs)("div",{className:"ts_rt_proceedCheckout_modalBody_inner",children:[(0,n.jsx)("div",{className:"ts_rt_proceedCheckout_productImage",children:(0,n.jsx)("img",{src:e.featured_image?e.featured_image.src:o,alt:"product img",onError:t=>t.target.src=l.O1})}),(0,n.jsxs)("div",{className:"ts_rt_proceedCheckout_productDetail",children:[(0,n.jsx)("div",{className:"ts_rt_proceedCheckout_productTitle",children:e.name}),(0,n.jsxs)("div",{className:"ts_rt_proceedCheckout_productPrice",children:[null===r||void 0===r||null===(t=r.UgcProduct)||void 0===t?void 0:t.price_currency_symbol,(null===r||void 0===r?void 0:r.UgcProduct.product_discount)>0?null===r||void 0===r?void 0:r.UgcProduct.product_discount:null===r||void 0===r?void 0:r.UgcProduct.product_price]}),this.state.cartItems?(0,n.jsxs)("div",{className:"ts_rt_proceedCheckout_product_added",children:["Your cart now has ",this.state.cartItems," item"]}):(0,n.jsx)(n.Fragment,{}),(0,n.jsxs)("div",{className:"ts_rt_proceedCheckout_actions",children:[(0,n.jsx)("div",{className:"ts_rt_proceedCheckout_actions_checkOut",onClick:()=>window.location="".concat(p.Mw,"/cart"),children:"Proceed to checkout"}),(0,n.jsx)("div",{className:"ts_rt_proceedCheckout_actions_shopping",onClick:s,children:"Continue Shopping"}),a&&a.UserRule&&1==a.UserRule.branding?(0,n.jsx)("div",{className:"ts_rt_branding ts_rt_branding_addToCart",children:(0,n.jsx)("img",{src:l.jS,alt:"brand logo"})}):null]})]})]})})})]})})}}var h=s(96710),m=s.n(h);const _=(0,a.$j)((t=>({mediaHeight:t.modalPop.mediaHeight,mediaWidth:t.modalPop.mediaWidth})),(t=>({setMediaSize:e=>t({type:"SET_MEDIA_SIZE",payload:e}),showHotspot:e=>t((0,r.EG)(e))})))((t=>{let{item:e,setMediaSize:s,ugc_products:a,wall:r,ImageUrl:i,videoUrl:d,showHotspot:l,mediaWidth:c,mediaHeight:p,inViewport:u,handleProgress:h,muted:_}=t;const[g,v]=(0,o.useState)(!1),[x,P]=(0,o.useState)(!1),[C,w]=(0,o.useState)(i),[j,y]=(0,o.useState)(0),[b,S]=(0,o.useState)(0),[D,I]=(0,o.useState)(.8),[f,N]=(0,o.useState)(d),[T,k]=(0,o.useState)(!1),U=(0,o.useRef)(),A=(0,o.useRef)();(0,o.useEffect)((()=>{C!==i&&(w(i),P(!1))}),[i]),(0,o.useEffect)((()=>{}),[u]);const E=t=>{const e=t.target.offsetHeight,o=t.target.offsetHeight;s({mediaHeight:e,mediaWidth:o}),P(!0)};return(0,n.jsx)("div",{className:"tb_media_holder",children:(0,n.jsx)(n.Fragment,{children:2===e.type||4===e.type?(0,n.jsx)("div",{className:"tb_img_holder",ref:U,onMouseEnter:()=>l({showAll:!0}),onMouseLeave:()=>l({showAll:!1}),style:{minHeight:x?null:p,minWidth:x?null:c,backgroundColor:"#000",display:"flex",alignItems:"center"},children:(0,n.jsx)("div",{className:"ts_outter_hotspot",children:(0,n.jsx)("img",{className:1==e.hotspot?"":"ts_popup_no_hotspots",src:i,"data-src":i,onLoad:t=>{v(!0),E(t)},"data-network":e.networkId,"data-filter-id":e.filterId,"data-stories":e.stories,"data-load":"0","data-item-id":e.id,"data-wall-id":r.Wall.id,alt:"popupImg"})})}):(0,n.jsx)("div",{className:"tb_img_holder",style:{backgroundColor:"#000"},children:(0,n.jsxs)("div",{className:"tb_modal_img_holder_001",children:[T?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)("div",{className:"ts_reelTheme_overlay_loader"}),u?(0,n.jsx)(m(),{style:T?{display:"contents",backgroundColor:"#000"}:{display:"none"},ref:A,className:"tb-detail-image-iframe",config:{facebook:{appId:"117029975354072",attributes:{"data-width":"auto","data-height":"".concat(document.querySelector(".ts_rt_post_in")?"".concat(document.querySelector(".ts_rt_post_in").clientHeight," px"):"100%")}},file:{forceVideo:!0,attributes:{muted:_}}},url:u?f||"www.sdklfjlksdhfkld.sdkkfjlsdh":"",progressInterval:100,"data-type":"video","data-stories":e.stories,"data-filter-id":e.filterId,"data-network":e.networkId,"data-link":e.link,"data-wall-id":r.Wall.id,"data-item-id":e.id,"data-load":"0",loop:!0,volume:D,onReady:()=>{k(!0)},muted:_,onProgress:t=>h(t),playing:u,playsinline:!0,width:"auto",height:"100%"}):(0,n.jsx)(n.Fragment,{}),T?(0,n.jsx)(n.Fragment,{}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"ts_reelTheme_spinner",children:(0,n.jsx)("div",{})}),(0,n.jsx)("img",{src:i,"data-src":i,onLoad:t=>{v(!0),E(t)},"data-network":e.networkId,"data-filter-id":e.filterId,"data-stories":e.stories,"data-load":"0","data-item-id":e.id,"data-wall-id":r.Wall.id,height:"100%",alt:"popupImg",style:{maxWidth:"fit-content",maxHeight:"100%"}})]})]})})})},"postID".concat(e.id))}));var g=s(15351);(0,g.z2)();class v extends o.PureComponent{constructor(){super(...arguments),this.state={activeSlider:0},this.changeActive=t=>{this.setState({activeSlider:t})}}render(){const{item:t,instaImg:e,ugc_products:s,isVideoError:o,wall:a}=this.props,{activeSlider:r}=this.state;return(0,n.jsx)("div",{className:"tb_post_modal_media_wrapper___",children:(0,n.jsxs)("div",{className:"tb_post_modal_slide_holder_",children:[(0,n.jsx)("swiper-container",{ref:this.myRef,className:"tb_post_modal_media_slider",navigation:JSON.stringify({nextEl:".tb_post_modal_arrow_right__",prevEl:".tb_post_modal_arrow_left__"}),pagination:"true",children:t.imageList.map(((t,i)=>(0,n.jsx)("swiper-slide",{style:{margin:0,padding:0},children:(0,n.jsx)("div",{className:"tb_post_modal_slide_list",children:(0,n.jsx)(_,{wall:a,item:t,instaImg:e,ugc_products:s,isVideoError:o,custmClass:"ts_popup_slider",ImageUrl:t.postFile,videoUrl:t.mediaFile,active:i==r})})},"psId".concat(i))))}),(0,n.jsxs)("div",{className:"splide__arrows splide__arrows--ltr tb_post_modal_arrow_wrapper_",children:[(0,n.jsx)("div",{className:"splide__arrow splide__arrow--prev tb_post_modal_arrow tb_post_modal_arrow_left__ tb__icon tb-chevron-left",children:(0,n.jsx)("div",{})}),(0,n.jsx)("div",{className:"splide__arrow splide__arrow--next  tb_post_modal_arrow tb_post_modal_arrow_right__ tb__icon  tb-chevron-right",children:(0,n.jsx)("div",{})})]})]})})}}function x(t){t.style.setProperty("visibility","visible","important"),t.style.setProperty("opacity","1","important"),t.style.setProperty("display","flex","important")}class P extends o.PureComponent{render(){return(0,n.jsxs)("a",{href:l.Cx,target:"_blank",ref:t=>{t&&(t.style.setProperty("position","absolute","important"),t.style.setProperty("left","auto","important"),t.style.setProperty("right","0","important"),t.style.setProperty("bottom","-40px","important"),t.style.setProperty("align-items","center","important"),t.style.setProperty("padding","4px 0","important"),t.style.setProperty("display","flex","important"),t.style.setProperty("width","auto","important"),t.style.setProperty("text-decoration","none","important"),x(t))},children:[(0,n.jsx)("div",{ref:t=>{t&&(t.style.setProperty("font-size","14px","important"),t.style.setProperty("color","#fff","important"),t.style.setProperty("margin-right","6px","important"),t.style.setProperty("width","100%","important"),t.style.setProperty("height","auto","important"),x(t))},children:"Powered By"}),(0,n.jsx)("div",{ref:t=>{t&&(t.style.setProperty("background-image","url(https://cloud.taggbox.com/taggshop/assets/images/home-page/tagshop-logo-white.svg)","important"),t.style.setProperty("background-size","contain","important"),t.style.setProperty("background-position","left center","important"),t.style.setProperty("background-repeat","no-repeat","important"),t.style.setProperty("height","35px","important"),t.style.setProperty("min-height","35px","important"),t.style.setProperty("width","102px","important"),t.style.setProperty("min-width","102px","important"),x(t))}})]})}}const C=t=>{let{product:e,wall:s,onsetProductImg:a,openAddtocart:i,item:l,setOnProductDetails:c}=t;const[p,u]=(0,o.useState)(!1),[h,m]=(0,o.useState)(!1),_=s.User.id,g=s.ProductSetting.Button,v=t=>{var e;const{Button:o}=s.ProductSetting;var a=t;114259==(null===s||void 0===s||null===(e=s.User)||void 0===e?void 0:e.id)?a+="?utm_source=tagshop&utm_medium=gallery&utm_campaign=".concat(l.network.name):1==(null===s||void 0===s?void 0:s.Wall.utm_status)&&(a+="?utm_source=".concat(null===s||void 0===s?void 0:s.Wall.utm_source,"&utm_medium=").concat(null===s||void 0===s?void 0:s.Wall.utm_medium,"&utm_campaign=").concat(null===s||void 0===s?void 0:s.Wall.utm_campaign)),2==parseInt(o.newTab)?window.parent.location.href=a:window.open(a,"_blank")};return(0,n.jsxs)("div",{className:"ts_reelTheme_Product ".concat(p?"ts_reelTheme_No_Product":""),children:[p?null:(0,n.jsx)("div",{className:"ts_reelTheme_rProductImage",children:(0,n.jsx)("img",{src:e.UgcProduct.product_image,alt:"",onError:()=>u(!0)})}),(0,n.jsxs)("div",{className:"ts_reelTheme_rProductDetail",children:[(0,n.jsx)("div",{className:"ts_reelTheme_rProductTitle",children:e.UgcProduct.product_title}),(0,n.jsxs)("div",{className:"ts_reelTheme_rProductPrice",children:[e.UgcProduct.product_price>0||e.UgcProduct.product_discount>0?(0,n.jsxs)("div",{className:"ts_reelTheme_rProductPrice_disconted",children:[e.UgcProduct.price_currency_symbol," ",e.UgcProduct.product_discount>0?e.UgcProduct.product_discount:e.UgcProduct.product_price]}):(0,n.jsx)(n.Fragment,{}),0==e.UgcProduct.product_discount||e.UgcProduct.product_price==e.UgcProduct.product_discount?(0,n.jsx)(n.Fragment,{}):(0,n.jsxs)("div",{className:"ts_reelTheme_rProductPrice_original",children:[e.UgcProduct.price_currency_symbol," ",e.UgcProduct.product_price]})]}),(0,n.jsxs)("div",{className:"ts_reelTheme_btn".concat(30656==_?"homepage-ig-product-link":""," ").concat(h?"ts_btn_loading":""),disabled:h,onClick:()=>{(async()=>{m(!0);const t={};if(e&&e.UgcProduct&&e.UgcProduct.product_url)try{(0,d.PC)(e.UgcProduct.product_url).then((s=>{s.data&&(t[e.id]=s.data,m(!1),c(t),i(e.id,e))})).catch((t=>{console.log("error",t),v(e.UgcProduct.product_url),m(!1)}))}catch(s){console.log("error",s),v(e.UgcProduct.product_url),m(!1)}})(),a(e.UgcProduct.product_image),((t,e)=>{var s;(0,r.S5)({type:1,action:2,wall:null===t||void 0===t||null===(s=t.Wall)||void 0===s?void 0:s.id,product_id:e,post:l.referenceId})})(s,e.UgcProduct.id)},children:[g.text," "]})]})]})};var w=s(89646);s(36497);const j=t=>{let{wall:e,item:s,instaImg:a,ugc_products:r,isVideoError:i,personalization:d,productLoading:c,showAddToCart:p,onsetProductImg:u,openAddtocart:h,onClosePopUp:m,addtoCartPopup:g,continueShopping:x,setOnProductDetails:j}=t;const y=(0,o.useRef)(),[b,S]=(0,o.useState)(!0),[D,I]=(0,o.useState)(0),f=((t,e)=>{const[s,a]=(0,o.useState)(!1),r=(0,o.useDeferredValue)(s);return(0,o.useEffect)((()=>{const s=new IntersectionObserver((t=>{let[e]=t;a(e.isIntersecting)}),{rootMargin:e});t.current&&s.observe(t.current)}),[]),r})(y,"-120px"),N=!!(s.imageList&&s.imageList.length>0),T=!(!e||!e.UserRule||1!=e.UserRule.branding),k=s.ugc_products;return(0,n.jsx)("div",{className:"tb_modal_dialog taggModal reelTheme_modalDialog",ref:y,children:(0,n.jsxs)("div",{className:"tb_conetent",style:{height:"100%"},children:[(0,n.jsx)("div",{className:"tb_modal_head"}),(0,n.jsx)("div",{className:"tb_modal_body reelTheme_modalBody",children:(0,n.jsxs)("div",{className:"tb_modal_body_wrap",style:{height:"100%"},children:[s.file?N?(0,n.jsx)(v,{inViewport:f,muted:b,wall:e,item:s,instaImg:a,ugc_products:k,isVideoError:i}):(0,n.jsx)(_,{muted:b,handleProgress:t=>I(t.played),wall:e,item:s,inViewport:f,instaImg:a,ugc_products:k,isVideoError:i,custmClass:"tb_media_wrap_002",ImageUrl:s.postFileNew,videoUrl:s.mediaUrl,active:!0}):"",(0,n.jsxs)("div",{className:"ts_reelTheme_overlay",style:N?{pointerEvents:"none"}:{},children:[g||x?null:(0,n.jsx)("div",{className:"ts_reel_close_btn",onClick:m,children:(0,n.jsx)("div",{className:"tb__icon tb-close-thin",children:(0,n.jsx)("div",{})})}),(0,n.jsx)("div",{className:"ts_reel_progress_bar",style:{width:"".concat(100*D,"%")},children:(0,n.jsx)("div",{})}),(0,n.jsxs)("div",{className:"ts_reelTheme_bottom",children:[(0,n.jsxs)("div",{className:"ts_rt_addToCart_modal_productSlider",children:[3==s.type||5==s.type?(0,n.jsx)("div",{className:"ts_reel_mute_button",onClick:()=>S(!b),children:(0,n.jsx)("div",{className:"tb__icon tb-".concat(b?"mute":"unmute"),children:(0,n.jsx)("div",{})})}):null,e.ProductSetting&&1==d.themeType&&k&&k.length>0?(0,n.jsx)(w.tq,{autoHeight:!0,speed:400,edgeSwipeDetection:!0,slidesPerView:s.ugc_products&&s.ugc_products.length>1?1.4:1.04,touchRatio:2,spaceBetween:0,direction:"horizontal",className:"reelThemeProduct_slider",children:s.ugc_products&&s.ugc_products.map(((t,o)=>(0,n.jsx)(w.o5,{children:(0,n.jsx)(C,{product:t,openAddtocart:h,onsetProductImg:u,showAddToCart:p,productLoading:c,wall:e,ugcSetting:e.ProductSetting,item:s,setOnProductDetails:j})},o)))}):null]}),T?(0,n.jsx)("div",{className:"ts_rt_branding",children:(0,n.jsx)("img",{src:l.jS,alt:"brand logo"})}):null]})]})]})}),T?(0,n.jsx)(P,{}):""]})})},y=o.memo(j);s(9223),s(96242);(0,g.z2)();class b extends o.PureComponent{constructor(t){var e;super(t),this.setMuted=t=>this.setState({muted:t}),this.setOnProductDetails=t=>this.setState({allProductDetails:t}),this.onErrorVideo=t=>this.setState({isVideoError:!0}),this.onMediaUpdate=t=>this.setState({isAuthorImagevalid:!1}),this.onAddToCart=(t,e)=>this.setState({selectedProductDetails:this.state.allProductDetails[t],tagshopProductDeatil:e}),this.requestData=()=>{const{wall:t,appendData:e,hasMoreData:s,loaderData:o}=this.props,a=t.ThemeRule.numberOfPosts,r=Math.floor(Date.now()/1e3);s&&!o.isShowMoreLoading&&this.props.getDataNextSteps(t.Wall.id,r,a,e.networkID,e.after,e.heightEvent)},this.onItemChange=t=>this.setState({item:t}),this.sliderRef=o.createRef(),this.state={currentIndex:null===(e=this.props)||void 0===e?void 0:e.currentIndex,item:this.props.item,isVideoError:!1,windowWidth:window.innerWidth,isAuthorImagevalid:!0,instaImg:(0,i.TI)(this.props.imgData,this.props.item.link),isHotspot:!1,addtoCartPopup:!1,allProductDetails:null,selectedProductId:null,selectedProductDetails:null,continueShopping:!1,selectedVariant:null,showAddToCart:!1,productLoading:!0,productImg:"",tagshopProductDeatil:null,muted:!0},this.splideRef=o.createRef()}componentDidMount(){const{currentIndex:t,item:e}=this.props,s=(0,i.uB)(e.author.picture);this.setState({currentIndex:t,item:e,isAuthorImagevalid:s,instaImg:(0,i.TI)(this.props.imgData,this.props.item.link)}),this.splideRef.current.addEventListener("swiperslidechange",(t=>{this.props.hasMoreData&&t.detail[0].progress>.9&&(this.requestData(),this.setState({currentIndex:this.splideRef.current.swiper.activeIndex}))}))}componentWillReceiveProps(t){const{currentIndex:e,item:s}=t,o=(0,i.uB)(s.author.picture);this.setState({currentIndex:e,item:s,isVideoError:!1,isAuthorImagevalid:o,instaImg:(0,i.TI)(this.props.imgData,this.props.item.link)})}render(){const{personalization:t,onClosePopUp:e,slideWithArrowKeys:s,wall:o,webFilters:a,completeData:r}=this.props,{currentIndex:d,item:l,isVideoError:p,instaImg:h,addtoCartPopup:m,selectedProductDetails:_,continueShopping:g,selectedVariant:v,showAddToCart:x,productImg:P,productLoading:C,tagshopProductDeatil:w}=this.state,j=(0,i.HS)(l.ugc_products),b=((0,i.EH)(l.networkId,a),l.type),S=l.ugc_products&&Object.keys(l.ugc_products).length>0;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"modalId".concat(l.id," tb_modal_001 tb_fade ").concat(4==b||5==b||S?"modal-text-image":2==b||3==b?"modal-only-image":"modal-only-text"),onKeyDown:s,onKeyPress:s,onLoad:s,onClick:t=>t.currentTarget==t.target&&e(t),children:(0,n.jsx)("swiper-container",{ref:this.splideRef,direction:"vertical",freeMode:JSON.stringify({enabled:!0,sticky:!0}),height:"".concat(window.innerHeight),"initial-slide":d,"passive-listeners":!0,children:r&&r.length>0?r.map(((s,a)=>(0,n.jsx)("swiper-slide",{children:(0,n.jsx)(y,{onItemChange:this.onItemChange,onClosePopUp:e,wall:o,item:s,instaImg:h,showAddToCart:x,openAddtocart:(t,e)=>this.setState({addtoCartPopup:!0},(()=>this.onAddToCart(t,e))),onsetProductImg:t=>this.setState({productImg:t}),productLoading:C,sliderRef:this.sliderRef,personalization:t,ugc_products:j,isVideoError:p,addtoCartPopup:m,continueShopping:g,setOnProductDetails:this.setOnProductDetails},"".concat(s.id,"-").concat(a))},"".concat(s.id,"-").concat(a)))):(0,n.jsx)(n.Fragment,{})})}),m&&_&&!g?(0,n.jsx)(c,{productImg:P,addtoCartPopup:m,productDetails:_,tagshopProductDeatil:w,closeAddtocart:()=>this.setState({addtoCartPopup:!1,selectedProductDetails:null}),onAddToCart:()=>this.setState({continueShopping:!0}),onSelectedVariant:t=>this.setState({selectedVariant:t}),wall:o}):(0,n.jsx)(n.Fragment,{}),g?(0,n.jsx)(u,{productImg:P,wall:o,addtoCartPopup:m,productDetails:v,tagshopProductDeatil:w,onBack:()=>this.setState({addtoCartPopup:!0,continueShopping:!1}),closeAddtocart:()=>this.setState({addtoCartPopup:!1,continueShopping:!1,selectedProductDetails:null})}):(0,n.jsx)(n.Fragment,{})]})}}const S=(0,a.$j)((t=>{const{appData:e}=t;return{loaderData:t.loaderData,appendData:e.postData.appendData,hasMoreData:!e.postData.hasMoreData[0]||0!=e.postData.hasMoreData[0].hasMoreData&&(!e.postData.hasMoreData[e.postData.appendData.networkID]||e.postData.hasMoreData[e.postData.appendData.networkID].hasMoreData)}}),(t=>({getDataNextSteps:(e,s,o,a,i,d,l)=>t((0,r.Sx)(e,s,o,a,i,d,l))})))(b);class D extends o.PureComponent{constructor(){super(...arguments),this.state={isEnable:0,eventData:{},shareText:"SHARE",viewOnText:"View on",currentIndex:null,completeData:{},personalization:{},url:null,imgData:[]},this.closeCommercePopUP=t=>{this.setState({isEnable:0,currentIndex:null},(()=>this.props.closePopUP()));var e=document.getElementsByTagName("html");e&&e[0]&&(e[0].style.overflow="")},this.getCommercePopUPEvent=t=>{void 0!==t&&""!==t&&t.card&&this.setState({url:"",isEnable:1,eventData:t,currentIndex:t.index,completeData:t.idArray,viewOnText:t.viewOnText,shareText:t.shareText,windowParent:t,imgData:t.imgData,personalization:t.personalization},(()=>this.CommercePopUPSlideWithArrowKey()))},this.featuredPopSliderChangeIndex=t=>e=>{const{eventData:s}=this.state;-1===t?this.setState({currentIndex:s.idArray.length-1}):this.setState({currentIndex:s.idArray.length===t?0:t})},this.SliderWithKey=t=>{const{eventData:e}=this.state;-1===t?this.setState({currentIndex:e.idArray.length-1}):this.setState({currentIndex:e.idArray.length===t?0:t})},this.CommercePopUPSlideWithArrowKey=t=>{const{personalization:e}=this.state;if(e&&1===e.popupSlideShow){let e=this;(t=t||window.event)&&t.keyCode&&void 0!==t.keyCode&&(37===t.keyCode?e.SliderWithKey(e.state.currentIndex-1):39===t.keyCode?e.SliderWithKey(e.state.currentIndex+1):27===t.keyCode&&this.closeCommercePopUP())}}}componentDidMount(){const{data:t}=this.props;this.getCommercePopUPEvent(t);var e=document.getElementsByTagName("html");e&&e[0]&&(e[0].style.overflow="hidden")}componentDidUpdate(t){this.props.data!==t.data&&this.getCommercePopUPEvent(this.props.data)}render(){const{viewOnText:t,isEnable:e,currentIndex:s,personalization:o,completeData:a,eventData:r,url:i,imgData:d}=this.state;let l=null;l=-1===s?a[r.idArray.length-1]:a[s];const{wall:c,webFilters:p}=this.props;return 1===e&&c?(0,n.jsx)(S,{webFilters:p,wall:c,item:l,completeData:a,onClosePopUp:this.closeCommercePopUP,currentIndex:s,personalization:o,viewOnText:t,slideWithArrowKeys:this.CommercePopUPSlideWithArrowKey,featuredPopSliderChangeIndex:this.featuredPopSliderChangeIndex,hostUrl:i,imgData:d}):null}}const I=(0,a.$j)((t=>({wall:t.appData.wall,webFilters:t.appData.webFilters})),(t=>({closePopUP:e=>t((0,r.zj)(e))})))(D)}}]);
//# sourceMappingURL=4963.d29ba5a6.chunk.js.map
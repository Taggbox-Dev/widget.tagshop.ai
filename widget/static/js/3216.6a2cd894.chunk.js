"use strict";(self.webpackChunkembed_widget=self.webpackChunkembed_widget||[]).push([[3216],{40692:(t,e,s)=>{s.d(e,{Kc:()=>n,PC:()=>i,Xq:()=>d,zt:()=>l});var o=s(74569),a=s.n(o),r=s(46535);const i=t=>a().get("".concat(t,".js")),d=t=>a().post("".concat(r.Mw,"/cart/add.js"),t),l=()=>a().get("".concat(r.Mw,"/cart.js")),n=t=>{a().post(r.WK,t).then((t=>{})).catch((t=>console.log("error",t)))}},3216:(t,e,s)=>{s.r(e),s.d(e,{default:()=>T});var o=s(72791),a=s(77581),r=s(92810),i=s(11225),d=s(2703),l=(s(54270),s(70188)),n=s(80184);class c extends o.Component{render(){const{item:t,networkData:e,wall:s}=this.props;s.ProductSetting&&Object.keys(s.ProductSetting).length;return(0,n.jsx)(n.Fragment,{})}}var p=s(40692);class u extends o.Component{constructor(){super(...arguments),this.state={allSizes:null,allColors:null,selectedColor:null,selectedSize:null,availableSize:[],productImage:"",optionError:!1},this.getOptions=()=>{const{productDetails:t}=this.props;var e=[],s=[];if(t&&t.options&&t.options.length&&t.options.map((t=>{t.values&&t.values.length&&("color"==t.name.toLowerCase()&&(e=t.values,this.setState({selectedColor:t.values[0]})),"size"==t.name.toLowerCase()?s=t.values:(e=t.values,this.setState({selectedColor:t.values[0]})))})),this.setState({allSizes:s,allColors:e}),e&&e.length)s&&s.length&&this.checkAvablity(e[0]);else{var o=[];t.variants.map((t=>{t.available&&(o.includes(t.option1)||o.push(t.option1))})),this.setState({availableSize:o})}},this.checkAvablity=t=>{const{variants:e}=this.props.productDetails;this.getProductImage();var s=[];e.map((e=>{var o;e.option1.toLowerCase()==t.toLowerCase()&&e.available&&(s.includes(e.option2)||s.push(e.option2)),(null===(o=e.option2)||void 0===o?void 0:o.toLowerCase())==t.toLowerCase()&&e.available&&(s.includes(e.option1)||s.push(e.option1))})),this.setState({availableSize:s})},this.onAddToCart=()=>{const{variants:t}=this.props.productDetails,{selectedColor:e,selectedSize:s,allColors:o,allSizes:a}=this.state;if(s&&""!=s||!a||!a.length)if(1==t.length)this.props.onSelectedVariant(t[0]),this.addProductsToCart(t[0]);else{var r=null,i=null;t.map((t=>{e&&e.length?t.options.includes(e)&&t.options.includes(s)?r=t:t.options.includes(e)&&(i=t):t.options.includes(s)&&(this.props.onSelectedVariant(t),this.addProductsToCart(t))})),null!=r?(this.props.onSelectedVariant(r),this.addProductsToCart(r)):i?(this.props.onSelectedVariant(i),this.addProductsToCart(i)):console.log("Shopify Variants Error!!")}else this.setState({optionError:!0})},this.addProductsToCart=t=>{const{wall:e,productDetails:s,tagshopProductDeatil:o}=this.props,a=new FormData;a.append("id",t.id),a.append("quantity",1),(0,p.Xq)(a).then((s=>{const a={variant:t.options?t.options.join(","):"",price:t.price/100,wall:e.Wall.wallId,website_id:0,product_id:o.UgcProduct.id,quantity:1,post:o.post_id};(0,p.Kc)(a),this.props.onAddToCart()})).catch((t=>{this.props.onAddToCart()}))},this.getColorImage=t=>{const{productDetails:e}=this.props;if(t){var s;const o=e.variants.find((e=>e.options.includes(t)));return o.featured_image?null===(s=o.featured_image)||void 0===s?void 0:s.src:this.props.productImg}},this.getProductImage=()=>{const{productDetails:t}=this.props,{selectedColor:e}=this.state;if(e){var s;const o=t.variants.find((t=>t.options.includes(e)));this.setState({productImage:o.featured_image?null===(s=o.featured_image)||void 0===s?void 0:s.src:this.props.productImg})}else this.setState({productImage:t.featured_image})}}componentDidMount(){const{productDetails:t}=this.props;this.getOptions(),this.getProductImage()}render(){var t;const{closeAddtocart:e,addtoCartPopup:s,productDetails:o,onSelectedVariant:a,productImg:r,wall:i,tagshopProductDeatil:d}=this.props,{allColors:c,allSizes:p,selectedColor:u,availableSize:h,selectedSize:m,productImage:_,optionError:g}=this.state;return(0,n.jsx)("div",{className:"ts_rt_addToCart_mobile_modal","aria-hidden":"true",children:(0,n.jsxs)("div",{className:"ts_rt_addToCart_mobilePopup_modalDialog",role:"document",children:[(0,n.jsx)("div",{className:"ts_rt_addToCart_mobilePopup_close_btn",onClick:e,children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",children:(0,n.jsx)("path",{d:"M14.5352 14.4531C14.2773 14.7109 13.8047 14.7109 13.5469 14.4531L7.875 8.73828L2.16016 14.4531C1.90234 14.7109 1.42969 14.7109 1.17188 14.4531C0.914062 14.1953 0.914062 13.7227 1.17188 13.4648L6.88672 7.75L1.17188 2.07812C0.914062 1.82031 0.914062 1.34766 1.17188 1.08984C1.42969 0.832031 1.90234 0.832031 2.16016 1.08984L7.875 6.80469L13.5469 1.08984C13.8047 0.832031 14.2773 0.832031 14.5352 1.08984C14.793 1.34766 14.793 1.82031 14.5352 2.07812L8.82031 7.75L14.5352 13.4648C14.793 13.7227 14.793 14.1953 14.5352 14.4531Z",fill:"white"})})}),(0,n.jsx)("div",{className:"ts_rt_addToCart_mobilePopup_modalContent",children:(0,n.jsx)("div",{className:"ts_rt_addToCart_mobilePopup_modalBody",children:(0,n.jsxs)("div",{className:"ts_rt_addToCart_mobilePopup_modalBody_inner",children:[(0,n.jsxs)("div",{className:"ts_rt_addToCart_mobilePopup_product_deatil",children:[(0,n.jsx)("div",{className:"ts_rt_addToCart_mobilePopup_productImage",children:(0,n.jsx)("img",{src:_||l.O1,alt:"product img",onError:t=>this.setState({productImage:l.O1})})}),(0,n.jsxs)("div",{className:"ts_rt_addToCart_mobilePopup_productDeatil_rightAlign",children:[(0,n.jsx)("div",{className:"ts_rt_addToCart_mobilePopup_productTitle",children:o.title}),(0,n.jsxs)("div",{className:"ts_rt_addToCart_mobilePopup_productPrice",children:[null===d||void 0===d||null===(t=d.UgcProduct)||void 0===t?void 0:t.price_currency_symbol,(null===d||void 0===d?void 0:d.UgcProduct.product_discount)>0?null===d||void 0===d?void 0:d.UgcProduct.product_discount:null===d||void 0===d?void 0:d.UgcProduct.product_price]})]})]}),(0,n.jsxs)("div",{className:"ts_rt_addToCart_mobilePopup_productDetail",children:[g?(0,n.jsx)("div",{className:"ts_addToCart_selectOptionsError",children:"Please select any one variant to proceed!"}):(0,n.jsx)(n.Fragment,{}),(0,n.jsx)("div",{className:"ts_rt_addToCart_mobilePopup_colorPalate_section",children:c&&c.length?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"ts_rt_addToCart_mobilePopup_colorHeading",children:"Color:"}),(0,n.jsx)("div",{className:"ts_rt_addToCart_mobilePopup_colorPalate",children:c.map((t=>(0,n.jsx)("div",{className:"ts_rt_addToCart_mobilePopup_color ".concat(u==t?"active":""),children:(0,n.jsx)("div",{className:"ts_rt_addToCart_mobilePopup_colorTile",style:{backgroundColor:t},onClick:()=>this.setState({selectedColor:t},(()=>this.checkAvablity(t))),children:(0,n.jsx)("img",{src:this.getColorImage(t),style:{height:"100%",width:"100%"},onError:t=>t.target.src=l.O1})})})))})]}):(0,n.jsx)(n.Fragment,{})}),p&&p.length?(0,n.jsxs)("div",{className:"ts_rt_addToCart_mobilePopup_sizeChart",children:[(0,n.jsx)("div",{className:"ts_rt_addToCart_mobilePopup_sizeChart_label",children:"Size"}),p.map((t=>h.includes(t)?(0,n.jsx)("div",{className:"ts_rt_addToCart_mobilePopup_sizebutton  ".concat(t==m?"active":""),onClick:()=>this.setState({selectedSize:t,optionError:!1}),children:t}):(0,n.jsxs)("div",{className:"ts_rt_addToCart_mobilePopup_sizebutton ts_productSize_unvavailable",children:[(0,n.jsx)("span",{className:"ts_rt_addToCart_mobilePopup_productSize_unvavailable_cross"}),t]})))]}):(0,n.jsx)(n.Fragment,{}),(0,n.jsxs)("div",{className:"ts_rt_addToCart_actions",children:[(0,n.jsx)("div",{className:"ts_rt_addToCart_actions_cancel",onClick:e,children:"Cancel"}),(0,n.jsx)("div",{className:"ts_rt_addToCart_actions_addCart",onClick:this.onAddToCart,children:"ADD TO CART"})]}),i&&i.UserRule&&"1"==i.UserRule.taggBranding?(0,n.jsx)("div",{className:"ts_rt_branding ts_rt_branding_addToCart",children:(0,n.jsx)("img",{src:"http://cloud.taggbox.com/taggshop/app/assets/media/tagshop-branding.svg",alt:"brand logo"})}):(0,n.jsx)(n.Fragment,{})]})]})})})]})})}}var h=s(46535);class m extends o.Component{constructor(){super(...arguments),this.state={cartItems:1}}componentDidMount(){(0,p.zt)().then((t=>{const{item_count:e}=t.data;e&&this.setState({cartItems:e})})).catch((t=>{console.error(t)}))}render(){var t;const{productDetails:e,closeAddtocart:s,productImg:o,wall:a,tagshopProductDeatil:r,onBack:i}=this.props;return(0,n.jsx)("div",{className:"ts_rt_proceedCheckout_modal","aria-hidden":"true",children:(0,n.jsxs)("div",{className:"ts_rt_proceedCheckout_modalDialog",role:"document",children:[(0,n.jsx)("div",{className:"ts_rt_proceedCheckout_close_btn",onClick:i,children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",children:(0,n.jsx)("path",{d:"M14.5352 14.4531C14.2773 14.7109 13.8047 14.7109 13.5469 14.4531L7.875 8.73828L2.16016 14.4531C1.90234 14.7109 1.42969 14.7109 1.17188 14.4531C0.914062 14.1953 0.914062 13.7227 1.17188 13.4648L6.88672 7.75L1.17188 2.07812C0.914062 1.82031 0.914062 1.34766 1.17188 1.08984C1.42969 0.832031 1.90234 0.832031 2.16016 1.08984L7.875 6.80469L13.5469 1.08984C13.8047 0.832031 14.2773 0.832031 14.5352 1.08984C14.793 1.34766 14.793 1.82031 14.5352 2.07812L8.82031 7.75L14.5352 13.4648C14.793 13.7227 14.793 14.1953 14.5352 14.4531Z",fill:"white"})})}),(0,n.jsx)("div",{className:"ts_rt_proceedCheckout_modalContent",children:(0,n.jsx)("div",{className:"ts_rt_proceedCheckout_modalBody",children:(0,n.jsxs)("div",{className:"ts_rt_proceedCheckout_modalBody_inner",children:[(0,n.jsx)("div",{className:"ts_rt_proceedCheckout_productImage",children:(0,n.jsx)("img",{src:e.featured_image?e.featured_image.src:o,alt:"product img",onError:t=>t.target.src=l.O1})}),(0,n.jsxs)("div",{className:"ts_rt_proceedCheckout_productDetail",children:[(0,n.jsx)("div",{className:"ts_rt_proceedCheckout_productTitle",children:e.name}),(0,n.jsxs)("div",{className:"ts_rt_proceedCheckout_productPrice",children:[null===r||void 0===r||null===(t=r.UgcProduct)||void 0===t?void 0:t.price_currency_symbol,(null===r||void 0===r?void 0:r.UgcProduct.product_discount)>0?null===r||void 0===r?void 0:r.UgcProduct.product_discount:null===r||void 0===r?void 0:r.UgcProduct.product_price]}),this.state.cartItems?(0,n.jsxs)("div",{className:"ts_rt_proceedCheckout_product_added",children:["Your cart now has ",this.state.cartItems," item"]}):(0,n.jsx)(n.Fragment,{}),(0,n.jsxs)("div",{className:"ts_rt_proceedCheckout_actions",children:[(0,n.jsx)("div",{className:"ts_rt_proceedCheckout_actions_checkOut",onClick:()=>window.location="".concat(h.Mw,"/cart"),children:"Proceed to checkout"}),(0,n.jsx)("div",{className:"ts_rt_proceedCheckout_actions_shopping",onClick:s,children:"Continue Shopping"}),a&&a.UserRule&&"1"==a.UserRule.taggBranding?(0,n.jsx)("div",{className:"ts_rt_branding ts_rt_branding_addToCart",children:(0,n.jsx)("img",{src:"http://cloud.taggbox.com/taggshop/app/assets/media/tagshop-branding.svg",alt:"brand logo"})}):(0,n.jsx)(n.Fragment,{})]})]})]})})})]})})}}var _=s(96710),g=s.n(_);const v=(0,a.$j)((t=>({mediaHeight:t.modalPop.mediaHeight,mediaWidth:t.modalPop.mediaWidth})),(t=>({setMediaSize:e=>t({type:"SET_MEDIA_SIZE",payload:e}),showHotspot:e=>t((0,i.EG)(e))})))((t=>{let{item:e,setMediaSize:s,ugc_products:a,wall:r,ImageUrl:i,videoUrl:d,showHotspot:l,mediaWidth:c,mediaHeight:p,inViewport:u,handleProgress:h,muted:m}=t;const[_,v]=(0,o.useState)(!1),[x,P]=(0,o.useState)(!1),[C,w]=(0,o.useState)(i),[y,j]=(0,o.useState)(0),[b,S]=(0,o.useState)(0),[D,f]=(0,o.useState)(.8),[I,N]=(0,o.useState)(d),[T,k]=(0,o.useState)(!1),U=(0,o.useRef)(),A=(0,o.useRef)();(0,o.useEffect)((()=>{C!==i&&(w(i),P(!1))}),[i]),(0,o.useEffect)((()=>{}),[u]);const E=t=>{const e=t.target.offsetHeight,o=t.target.offsetHeight;s({mediaHeight:e,mediaWidth:o}),P(!0)};return(0,n.jsx)("div",{className:"tb_media_holder",children:(0,n.jsx)(n.Fragment,{children:2===e.type||4===e.type?(0,n.jsx)("div",{className:"tb_img_holder",ref:U,onMouseEnter:()=>l({showAll:!0}),onMouseLeave:()=>l({showAll:!1}),style:{minHeight:x?null:p,minWidth:x?null:c,backgroundColor:"#000",display:"flex",alignItems:"center"},children:(0,n.jsx)("div",{className:"ts_outter_hotspot",children:(0,n.jsx)("img",{className:1==e.hotspot?"":"ts_popup_no_hotspots",src:i,"data-src":i,onLoad:t=>{v(!0),E(t)},"data-network":e.networkId,"data-filter-id":e.filterId,"data-stories":e.stories,"data-load":"0","data-item-id":e.id,"data-wall-id":r.Wall.id,alt:"popupImg"})})}):(0,n.jsx)("div",{className:"tb_img_holder",style:{backgroundColor:"#000"},children:(0,n.jsxs)("div",{className:"tb_modal_img_holder_001",children:[T?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)("div",{className:"ts_reelTheme_overlay_loader"}),u?(0,n.jsx)(g(),{style:T?{display:"contents",backgroundColor:"#000"}:{display:"none"},ref:A,className:"tb-detail-image-iframe",config:{facebook:{appId:"117029975354072",attributes:{"data-width":"auto","data-height":"".concat(document.querySelector(".ts_rt_post_in")?"".concat(document.querySelector(".ts_rt_post_in").clientHeight," px"):"100%")}},file:{forceVideo:!0,attributes:{muted:m}}},url:u?I||"www.sdklfjlksdhfkld.sdkkfjlsdh":"",progressInterval:100,"data-type":"video","data-stories":e.stories,"data-filter-id":e.filterId,"data-network":e.networkId,"data-link":e.link,"data-wall-id":r.Wall.id,"data-item-id":e.id,"data-load":"0",loop:!0,volume:D,onReady:()=>{k(!0)},muted:m,onProgress:t=>h(t),playing:u,playsinline:!0,width:"auto",height:"100%"}):(0,n.jsx)(n.Fragment,{}),T?(0,n.jsx)(n.Fragment,{}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"ts_reelTheme_spinner",children:(0,n.jsx)("div",{})}),(0,n.jsx)("img",{src:i,"data-src":i,onLoad:t=>{v(!0),E(t)},"data-network":e.networkId,"data-filter-id":e.filterId,"data-stories":e.stories,"data-load":"0","data-item-id":e.id,"data-wall-id":r.Wall.id,height:"100%",alt:"popupImg",style:{maxWidth:"fit-content",maxHeight:"100%"}})]})]})})})},"postID".concat(e.id))}));var x=s(15351);(0,x.z2)();class P extends o.PureComponent{constructor(){super(...arguments),this.state={activeSlider:0},this.changeActive=t=>{this.setState({activeSlider:t})}}render(){const{item:t,instaImg:e,ugc_products:s,isVideoError:o,wall:a}=this.props,{activeSlider:r}=this.state;return(0,n.jsx)("div",{className:"tb_post_modal_media_wrapper___",children:(0,n.jsxs)("div",{className:"tb_post_modal_slide_holder_",children:[(0,n.jsx)("swiper-container",{ref:this.myRef,className:"tb_post_modal_media_slider",navigation:JSON.stringify({nextEl:".tb_post_modal_arrow_right__",prevEl:".tb_post_modal_arrow_left__"}),pagination:"true",children:t.imageList.map(((t,i)=>(0,n.jsx)("swiper-slide",{style:{margin:0,padding:0},children:(0,n.jsx)("div",{className:"tb_post_modal_slide_list",children:(0,n.jsx)(v,{wall:a,item:t,instaImg:e,ugc_products:s,isVideoError:o,custmClass:"ts_popup_slider",ImageUrl:t.postFile,videoUrl:t.mediaFile,active:i==r})})},"psId".concat(i))))}),(0,n.jsxs)("div",{className:"splide__arrows splide__arrows--ltr tb_post_modal_arrow_wrapper_",children:[(0,n.jsx)("div",{className:"splide__arrow splide__arrow--prev tb_post_modal_arrow tb_post_modal_arrow_left__ tb__icon tb-chevron-left",children:(0,n.jsx)("div",{})}),(0,n.jsx)("div",{className:"splide__arrow splide__arrow--next  tb_post_modal_arrow tb_post_modal_arrow_right__ tb__icon  tb-chevron-right",children:(0,n.jsx)("div",{})})]})]})})}}function C(t){t.style.setProperty("visibility","visible","important"),t.style.setProperty("opacity","1","important"),t.style.setProperty("display","flex","important")}class w extends o.PureComponent{render(){return(0,n.jsxs)("a",{href:l.Cx,target:"_blank",ref:t=>{t&&(t.style.setProperty("position","absolute","important"),t.style.setProperty("left","auto","important"),t.style.setProperty("right","0","important"),t.style.setProperty("bottom","-40px","important"),t.style.setProperty("align-items","center","important"),t.style.setProperty("padding","4px 0","important"),t.style.setProperty("display","flex","important"),t.style.setProperty("width","auto","important"),t.style.setProperty("text-decoration","none","important"),C(t))},children:[(0,n.jsx)("div",{ref:t=>{t&&(t.style.setProperty("font-size","14px","important"),t.style.setProperty("color","#fff","important"),t.style.setProperty("margin-right","6px","important"),t.style.setProperty("width","100%","important"),t.style.setProperty("height","auto","important"),C(t))},children:"Powered By"}),(0,n.jsx)("div",{ref:t=>{t&&(t.style.setProperty("background-image","url(https://cloud.taggbox.com/taggshop/assets/images/home-page/tagshop-logo-white.svg)","important"),t.style.setProperty("background-size","contain","important"),t.style.setProperty("background-position","left center","important"),t.style.setProperty("background-repeat","no-repeat","important"),t.style.setProperty("height","35px","important"),t.style.setProperty("min-height","35px","important"),t.style.setProperty("width","102px","important"),t.style.setProperty("min-width","102px","important"),C(t))}})]})}}const y=t=>{let{product:e,productLoading:s,showAddToCart:a,wall:r,ugcSetting:d,onsetProductImg:l,openAddtocart:c,item:u,setOnProductDetails:h}=t;const[m,_]=(0,o.useState)(!1),[g,v]=(0,o.useState)(!1),x=r.User.id,P=r.ProductSetting.Button,C=t=>{var e;const s=r.ProductSetting.Button;var o=t;114259==(null===r||void 0===r||null===(e=r.User)||void 0===e?void 0:e.id)?o+="?utm_source=tagshop&utm_medium=gallery&utm_campaign=".concat(u.network.name):1==(null===r||void 0===r?void 0:r.Wall.utm_status)&&(o+="?utm_source=".concat(null===r||void 0===r?void 0:r.Wall.utm_source,"&utm_medium=").concat(null===r||void 0===r?void 0:r.Wall.utm_medium,"&utm_campaign=").concat(null===r||void 0===r?void 0:r.Wall.utm_campaign)),2==parseInt(s.newTab)?window.parent.location.href=o:window.open(o,"_blank")};return(0,n.jsxs)("div",{className:"ts_reelTheme_Product ".concat(m?"ts_reelTheme_No_Product":""),children:[m?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)("div",{className:"ts_reelTheme_rProductImage",children:(0,n.jsx)("img",{src:e.UgcProduct.product_image,alt:"",onError:()=>_(!0)})}),(0,n.jsxs)("div",{className:"ts_reelTheme_rProductDetail",children:[(0,n.jsx)("div",{className:"ts_reelTheme_rProductTitle",children:e.UgcProduct.product_title}),(0,n.jsxs)("div",{className:"ts_reelTheme_rProductPrice",children:[e.UgcProduct.product_price>0||e.UgcProduct.product_discount>0?(0,n.jsxs)("div",{className:"ts_reelTheme_rProductPrice_disconted",children:[e.UgcProduct.price_currency_symbol," ",e.UgcProduct.product_discount>0?e.UgcProduct.product_discount:e.UgcProduct.product_price]}):(0,n.jsx)(n.Fragment,{}),0==e.UgcProduct.product_discount||e.UgcProduct.product_price==e.UgcProduct.product_discount?(0,n.jsx)(n.Fragment,{}):(0,n.jsxs)("div",{className:"ts_reelTheme_rProductPrice_original",children:[e.UgcProduct.price_currency_symbol," ",e.UgcProduct.product_price]})]}),(0,n.jsxs)("div",{className:"ts_reelTheme_btn".concat(30656==x?"homepage-ig-product-link":""," ").concat(g?"ts_btn_loading":""),disabled:g,onClick:()=>{(async()=>{v(!0);const t={};if(e&&e.UgcProduct&&e.UgcProduct.product_url)try{(0,p.PC)(e.UgcProduct.product_url).then((s=>{s.data&&(t[e.id]=s.data,v(!1),h(t),c(e.id,e))})).catch((t=>{console.log("error",t),C(e.UgcProduct.product_url),v(!1)}))}catch(s){console.log("error",s),C(e.UgcProduct.product_url),v(!1)}})(),l(e.UgcProduct.product_image),((t,e)=>{var s;(0,i.S5)({type:1,action:2,wall:null===t||void 0===t||null===(s=t.Wall)||void 0===s?void 0:s.id,product_id:e,post:u.referenceId})})(r,e.UgcProduct.id)},children:[P.text," "]})]})]})};var j=s(89646);s(36497);const b=t=>{let{wall:e,item:s,instaImg:a,ugc_products:r,isVideoError:i,personalization:l,productLoading:c,showAddToCart:p,onsetProductImg:u,openAddtocart:h,onClosePopUp:m,addtoCartPopup:_,continueShopping:g,onItemChange:x,setOnProductDetails:C}=t;const b=(0,o.useRef)(),[S,D]=(0,o.useState)(!0),[f,I]=(0,o.useState)(0),N=((t,e)=>{const[s,a]=(0,o.useState)(!1),r=(0,o.useDeferredValue)(s);return(0,o.useEffect)((()=>{const s=new IntersectionObserver((t=>{let[e]=t;a(e.isIntersecting)}),{rootMargin:e});t.current&&s.observe(t.current)}),[]),r})(b,"-120px");return(0,n.jsx)("div",{className:"tb_modal_dialog taggModal reelTheme_modalDialog",ref:b,children:(0,n.jsxs)("div",{className:"tb_conetent",style:{height:"100%"},children:[(0,n.jsx)("div",{className:"tb_modal_head"}),(0,n.jsx)("div",{className:"tb_modal_body reelTheme_modalBody",children:(0,n.jsxs)("div",{className:"tb_modal_body_wrap",style:{height:"100%"},children:[s.file?s.imageList&&s.imageList.length>0?(0,n.jsx)(P,{inViewport:N,muted:S,wall:e,item:s,instaImg:a,ugc_products:r,isVideoError:i}):(0,n.jsx)(v,{muted:S,handleProgress:t=>{I(t.played)},wall:e,item:s,inViewport:N,instaImg:a,ugc_products:r,isVideoError:i,custmClass:"tb_media_wrap_002",ImageUrl:s.postFileNew,videoUrl:s.mediaUrl,active:!0}):"",(0,n.jsxs)("div",{className:"ts_reelTheme_overlay",style:s.imageList&&s.imageList.length>0?{pointerEvents:"none"}:{},children:[_||g?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)("div",{className:"ts_reel_close_btn",onClick:m,children:(0,n.jsx)("div",{className:"tb__icon tb-close-thin",children:(0,n.jsx)("div",{})})}),(0,n.jsx)("div",{className:"ts_reel_progress_bar",style:{width:"".concat(100*f,"%")}}),(0,n.jsxs)("div",{className:"ts_reelTheme_bottom",children:[(0,n.jsxs)("div",{className:"ts_rt_addToCart_modal_productSlider",children:[3==s.type||5==s.type?(0,n.jsx)("div",{className:"ts_reel_mute_button",onClick:()=>{D(!S)},children:S?(0,n.jsx)("div",{className:"tb__icon tb-mute",children:(0,n.jsx)("div",{})}):(0,n.jsx)("div",{className:"tb__icon tb-unmute",children:(0,n.jsx)("div",{})})}):(0,n.jsx)(n.Fragment,{}),e.ProductSetting&&1==l.themeType&&s.ugc_products&&Object.keys(s.ugc_products).length>0?(0,n.jsx)(j.tq,{autoHeight:!0,speed:400,edgeSwipeDetection:!0,slidesPerView:s.ugc_products&&s.ugc_products.length>1?1.4:1.04,touchRatio:2,spaceBetween:0,direction:"horizontal",className:"reelThemeProduct_slider",children:(0,d.HS)(s.ugc_products).map(((t,o)=>(0,n.jsx)(j.o5,{children:(0,n.jsx)(y,{product:t,openAddtocart:h,onsetProductImg:u,showAddToCart:p,productLoading:c,wall:e,ugcSetting:e.ProductSetting,item:s,setOnProductDetails:C})},o)))}):null]}),e&&e.UserRule&&"1"==e.UserRule.taggBranding?(0,n.jsx)("div",{className:"ts_rt_branding",children:(0,n.jsx)("img",{src:"http://cloud.taggbox.com/taggshop/app/assets/media/tagshop-branding.svg",alt:"brand logo"})}):(0,n.jsx)(n.Fragment,{})]})]})]})}),e&&e.UserRule&&"1"==e.UserRule.taggBranding?(0,n.jsx)(w,{}):""]})})},S=o.memo(b);s(9223),s(96242);(0,x.z2)();class D extends o.PureComponent{constructor(t){var e;super(t),this.setMuted=t=>this.setState({muted:t}),this.setOnProductDetails=t=>{this.setState({allProductDetails:t})},this.onErrorVideo=t=>this.setState({isVideoError:!0}),this.onMediaUpdate=t=>this.setState({isAuthorImagevalid:!1}),this.onAddToCart=(t,e)=>{this.setState({selectedProductDetails:this.state.allProductDetails[t],tagshopProductDeatil:e})},this.onUpdateData=()=>{setTimeout((()=>this.requestData()),0)},this.requestData=()=>{const{wall:t,appendData:e,hasMoreData:s,loaderData:o}=this.props,a=t.ThemeRule.numberOfPosts,r=Math.floor(Date.now()/1e3);s&&!o.isShowMoreLoading&&this.props.getDataNextSteps(t.Wall.id,r,a,e.networkID,e.after,e.heightEvent)},this.onItemChange=t=>{this.setState({item:t})},this.getShopifyProducts=t=>{var e={};t&&t.ugc_products&&t.ugc_products.length&&(t.ugc_products.map((t=>{(0,p.PC)(t.UgcProduct.product_url).then((s=>{s.data&&(e[t.id]=s.data,this.setState({showAddToCart:!0,productLoading:!1}))})).catch((t=>{this.setState({showAddToCart:!1,productLoading:!1})}))})),this.setState({allProductDetails:e}))},this.sliderRef=o.createRef(),this.state={currentIndex:null===(e=this.props)||void 0===e?void 0:e.currentIndex,item:this.props.item,isVideoError:!1,windowWidth:window.innerWidth,isAuthorImagevalid:!0,instaImg:(0,d.TI)(this.props.imgData,this.props.item.link),isHotspot:!1,addtoCartPopup:!1,allProductDetails:null,selectedProductId:null,selectedProductDetails:null,continueShopping:!1,selectedVariant:null,showAddToCart:!1,productLoading:!0,productImg:"",tagshopProductDeatil:null,muted:!0},this.splideRef=o.createRef()}componentDidMount(){const{currentIndex:t,item:e,slideWithArrowKeys:s}=this.props,o=(0,d.uB)(e.author.picture);this.setState({currentIndex:t,item:e,isAuthorImagevalid:o,instaImg:(0,d.TI)(this.props.imgData,this.props.item.link)}),this.splideRef.current.addEventListener("swiperslidechange",(t=>{this.props.hasMoreData&&t.detail[0].progress>.9&&(this.onUpdateData(),this.setState({currentIndex:this.splideRef.current.swiper.activeIndex}))}))}UNSAFE_componentWillReceiveProps(t){const{currentIndex:e,item:s}=t,o=(0,d.uB)(s.author.picture);this.setState({currentIndex:e,item:s,isVideoError:!1,isAuthorImagevalid:o,instaImg:(0,d.TI)(this.props.imgData,this.props.item.link)})}render(){const{personalization:t,onClosePopUp:e,slideWithArrowKeys:s,wall:o,webFilters:a,completeData:r,hasMoreData:i}=this.props,{currentIndex:l,item:p,isVideoError:h,instaImg:_,addtoCartPopup:g,selectedProductDetails:v,continueShopping:x,selectedVariant:P,showAddToCart:C,productImg:w,productLoading:y,tagshopProductDeatil:j,muted:b}=this.state,D=(0,d.HS)(p.ugc_products),f=(0,d.EH)(p.networkId,a);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c,{wall:o,item:p,networkData:f}),(0,n.jsx)("div",{className:"modalId".concat(p.id," tb_modal_001 tb_fade ").concat(4==p.type||5==p.type||p.ugc_products&&Object.keys(p.ugc_products).length>0?"modal-text-image":2==p.type||3==p.type?"modal-only-image":"modal-only-text"),onKeyDown:s,onKeyPress:s,onLoad:s,onClick:t=>t.currentTarget==t.target&&e(t),children:(0,n.jsx)("swiper-container",{ref:this.splideRef,direction:"vertical",freeMode:JSON.stringify({enabled:!0,sticky:!0}),height:"".concat(window.innerHeight),"initial-slide":l,"passive-listeners":!0,children:r&&r.length>0?r.map(((s,a)=>(0,n.jsx)("swiper-slide",{children:(0,n.jsx)(S,{onItemChange:this.onItemChange,onClosePopUp:e,wall:o,item:s,instaImg:_,showAddToCart:C,openAddtocart:(t,e)=>this.setState({addtoCartPopup:!0},(()=>this.onAddToCart(t,e))),onsetProductImg:t=>this.setState({productImg:t}),productLoading:y,sliderRef:this.sliderRef,personalization:t,ugc_products:D,isVideoError:h,addtoCartPopup:g,continueShopping:x,setOnProductDetails:this.setOnProductDetails},"".concat(s.id,"-").concat(a))},"".concat(s.id,"-").concat(a)))):(0,n.jsx)(n.Fragment,{})})}),g&&v&&!x?(0,n.jsx)(u,{productImg:w,addtoCartPopup:g,productDetails:v,tagshopProductDeatil:j,closeAddtocart:()=>this.setState({addtoCartPopup:!1,selectedProductDetails:null}),onAddToCart:()=>this.setState({continueShopping:!0}),onSelectedVariant:t=>this.setState({selectedVariant:t}),wall:o}):(0,n.jsx)(n.Fragment,{}),x?(0,n.jsx)(m,{productImg:w,wall:o,addtoCartPopup:g,productDetails:P,tagshopProductDeatil:j,onBack:()=>this.setState({addtoCartPopup:!0,continueShopping:!1}),closeAddtocart:()=>this.setState({addtoCartPopup:!1,continueShopping:!1,selectedProductDetails:null})}):(0,n.jsx)(n.Fragment,{})]})}}const f=(0,a.$j)((t=>{const{appData:e}=t;return{loaderData:t.loaderData,appendData:e.postData.appendData,hasMoreData:!e.postData.hasMoreData[0]||0!=e.postData.hasMoreData[0].hasMoreData&&(!e.postData.hasMoreData[e.postData.appendData.networkID]||e.postData.hasMoreData[e.postData.appendData.networkID].hasMoreData)}}),(t=>({getDataNextSteps:(e,s,o,a,r,d,l)=>t((0,i.Sx)(e,s,o,a,r,d,l))})))(D),I=(0,o.lazy)((()=>s.e(92).then(s.bind(s,80092))));class N extends o.PureComponent{constructor(){super(...arguments),this.state={isEnable:0,eventData:{},shareText:"SHARE",viewOnText:"View on",currentIndex:null,completeData:{},personalization:{},url:null,platform:null,imgData:[],type:""},this.closeCommercePopUP=t=>{(0,d.st)("remove"),this.setState({isEnable:0,currentIndex:null,type:""}),this.props.closePopUP();var e=document.getElementsByTagName("html");e&&e[0]&&(e[0].style.overflow="")},this.getCommercePopUPEvent=t=>{void 0!==t&&""!==t&&t.card&&("post"===t.type?this.setState({url:"",isEnable:1,eventData:t,currentIndex:t.index,completeData:t.idArray,viewOnText:t.viewOnText,shareText:t.shareText,windowParent:t,imgData:t.imgData,personalization:t.personalization,type:t.type},(()=>this.CommercePopUPSlideWithArrowKey())):"submit-pic"===t.type&&this.setState({isEnable:1,type:t.type,windowParent:t}))},this.featuredPopSliderChangeIndex=t=>e=>{const{eventData:s}=this.state;-1===t?this.setState({currentIndex:s.idArray.length-1}):this.setState({currentIndex:s.idArray.length===t?0:t})},this.SliderWithKey=t=>{const{eventData:e}=this.state;-1===t?this.setState({currentIndex:e.idArray.length-1}):this.setState({currentIndex:e.idArray.length===t?0:t})},this.CommercePopUPSlideWithArrowKey=t=>{const{personalization:e}=this.state;if(e&&1===e.popupSlideShow){let e=this;(t=t||window.event)&&t.keyCode&&void 0!==t.keyCode&&(37===t.keyCode?e.SliderWithKey(e.state.currentIndex-1):39===t.keyCode?e.SliderWithKey(e.state.currentIndex+1):27===t.keyCode&&this.closeCommercePopUP())}}}componentDidMount(){const{data:t}=this.props;this.getCommercePopUPEvent(t);var e=document.getElementsByTagName("html");e&&e[0]&&(e[0].style.overflow="hidden")}componentDidUpdate(t){this.props.data!==t.data&&this.getCommercePopUPEvent(this.props.data)}render(){const{viewOnText:t,isEnable:e,currentIndex:s,personalization:a,completeData:i,eventData:d,url:l,platform:c,imgData:p,type:u}=this.state;let h=null;"post"===u&&(h=-1===s?i[d.idArray.length-1]:i[s]);const{wall:m,webFilters:_}=this.props;return 1===e&&m&&"submit-pic"===u?(0,n.jsx)(o.Suspense,{fallback:null,children:(0,n.jsx)(I,{wall:m,wallId:m.Wall.id,onClosePopUp:this.closeCommercePopUP})}):1===e&&"post"===u?(0,n.jsx)(f,{webFilters:_,wall:m,item:h,completeData:i,onClosePopUp:this.closeCommercePopUP,currentIndex:s,personalization:a,viewOnText:t,slideWithArrowKeys:this.CommercePopUPSlideWithArrowKey,featuredPopSliderChangeIndex:this.featuredPopSliderChangeIndex,hostUrl:l,platform:c,imgData:p},(0,r.Z)()):null}}const T=(0,a.$j)((t=>({wall:t.appData.wall,webFilters:t.appData.webFilters})),(t=>({closePopUP:e=>t((0,i.zj)(e))})))(N)}}]);
//# sourceMappingURL=3216.6a2cd894.chunk.js.map